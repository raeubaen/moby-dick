/*! cryptii v4.0.8+master.47ba248 - (c) Fränz Friederes 2020 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define("cryptii",["exports"],t):t((e=e||self).cryptii={})}(this,(function(e){var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function r(e,t){return e(t={exports:{}},t.exports),t.exports}var a,o,s,l=function(e){return e&&e.Math==Math&&e},u=l("object"==typeof globalThis&&globalThis)||l("object"==typeof window&&window)||l("object"==typeof self&&self)||l("object"==typeof t&&t)||Function("return this")(),c=function(e){try{return!!e()}catch(e){return!0}},h=!c((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})),f={}.propertyIsEnumerable,d=Object.getOwnPropertyDescriptor,v={f:d&&!f.call({1:2},1)?function(e){var t=d(this,e);return!!t&&t.enumerable}:f},p=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},g={}.toString,y=function(e){return g.call(e).slice(8,-1)},_="".split,m=c((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==y(e)?_.call(e,""):Object(e)}:Object,b=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e},k=function(e){return m(b(e))},w=function(e){return"object"==typeof e?null!==e:"function"==typeof e},x=function(e,t){if(!w(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!w(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!w(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!w(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")},E={}.hasOwnProperty,S=function(e,t){return E.call(e,t)},C=u.document,V=w(C)&&w(C.createElement),L=function(e){return V?C.createElement(e):{}},T=!h&&!c((function(){return 7!=Object.defineProperty(L("div"),"a",{get:function(){return 7}}).a})),P=Object.getOwnPropertyDescriptor,B={f:h?P:function(e,t){if(e=k(e),t=x(t,!0),T)try{return P(e,t)}catch(e){}if(S(e,t))return p(!v.f.call(e,t),e[t])}},A=function(e){if(!w(e))throw TypeError(String(e)+" is not an object");return e},M=Object.defineProperty,F={f:h?M:function(e,t,n){if(A(e),t=x(t,!0),A(n),T)try{return M(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},O=h?function(e,t,n){return F.f(e,t,p(1,n))}:function(e,t,n){return e[t]=n,e},D=function(e,t){try{O(u,e,t)}catch(n){u[e]=t}return t},I=u["__core-js_shared__"]||D("__core-js_shared__",{}),$=r((function(e){(e.exports=function(e,t){return I[e]||(I[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.4.1",mode:"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})})),N=$("native-function-to-string",Function.toString),R=u.WeakMap,j="function"==typeof R&&/native code/.test(N.call(R)),z=0,H=Math.random(),U=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++z+H).toString(36)},W=$("keys"),q=function(e){return W[e]||(W[e]=U(e))},G={},Y=u.WeakMap;if(j){var K=new Y,J=K.get,X=K.has,Z=K.set;a=function(e,t){return Z.call(K,e,t),t},o=function(e){return J.call(K,e)||{}},s=function(e){return X.call(K,e)}}else{var Q=q("state");G[Q]=!0,a=function(e,t){return O(e,Q,t),t},o=function(e){return S(e,Q)?e[Q]:{}},s=function(e){return S(e,Q)}}var ee={set:a,get:o,has:s,enforce:function(e){return s(e)?o(e):a(e,{})},getterFor:function(e){return function(t){var n;if(!w(t)||(n=o(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return n}}},te=r((function(e){var t=ee.get,n=ee.enforce,i=String(N).split("toString");$("inspectSource",(function(e){return N.call(e)})),(e.exports=function(e,t,r,a){var o=!!a&&!!a.unsafe,s=!!a&&!!a.enumerable,l=!!a&&!!a.noTargetGet;"function"==typeof r&&("string"!=typeof t||S(r,"name")||O(r,"name",t),n(r).source=i.join("string"==typeof t?t:"")),e!==u?(o?!l&&e[t]&&(s=!0):delete e[t],s?e[t]=r:O(e,t,r)):s?e[t]=r:D(t,r)})(Function.prototype,"toString",(function(){return"function"==typeof this&&t(this).source||N.call(this)}))})),ne=u,ie=function(e){return"function"==typeof e?e:void 0},re=function(e,t){return arguments.length<2?ie(ne[e])||ie(u[e]):ne[e]&&ne[e][t]||u[e]&&u[e][t]},ae=Math.ceil,oe=Math.floor,se=function(e){return isNaN(e=+e)?0:(e>0?oe:ae)(e)},le=Math.min,ue=function(e){return e>0?le(se(e),9007199254740991):0},ce=Math.max,he=Math.min,fe=function(e,t){var n=se(e);return n<0?ce(n+t,0):he(n,t)},de=function(e){return function(t,n,i){var r,a=k(t),o=ue(a.length),s=fe(i,o);if(e&&n!=n){for(;o>s;)if((r=a[s++])!=r)return!0}else for(;o>s;s++)if((e||s in a)&&a[s]===n)return e||s||0;return!e&&-1}},ve={includes:de(!0),indexOf:de(!1)},pe=ve.indexOf,ge=function(e,t){var n,i=k(e),r=0,a=[];for(n in i)!S(G,n)&&S(i,n)&&a.push(n);for(;t.length>r;)S(i,n=t[r++])&&(~pe(a,n)||a.push(n));return a},ye=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],_e=ye.concat("length","prototype"),me={f:Object.getOwnPropertyNames||function(e){return ge(e,_e)}},be={f:Object.getOwnPropertySymbols},ke=re("Reflect","ownKeys")||function(e){var t=me.f(A(e)),n=be.f;return n?t.concat(n(e)):t},we=function(e,t){for(var n=ke(t),i=F.f,r=B.f,a=0;a<n.length;a++){var o=n[a];S(e,o)||i(e,o,r(t,o))}},xe=/#|\.prototype\./,Ee=function(e,t){var n=Ce[Se(e)];return n==Le||n!=Ve&&("function"==typeof t?c(t):!!t)},Se=Ee.normalize=function(e){return String(e).replace(xe,".").toLowerCase()},Ce=Ee.data={},Ve=Ee.NATIVE="N",Le=Ee.POLYFILL="P",Te=Ee,Pe=B.f,Be=function(e,t){var n,i,r,a,o,s=e.target,l=e.global,c=e.stat;if(n=l?u:c?u[s]||D(s,{}):(u[s]||{}).prototype)for(i in t){if(a=t[i],r=e.noTargetGet?(o=Pe(n,i))&&o.value:n[i],!Te(l?i:s+(c?".":"#")+i,e.forced)&&void 0!==r){if(typeof a==typeof r)continue;we(a,r)}(e.sham||r&&r.sham)&&O(a,"sham",!0),te(n,i,a,e)}},Ae=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e},Me=function(e,t,n){if(Ae(e),void 0===t)return e;switch(n){case 0:return function(){return e.call(t)};case 1:return function(n){return e.call(t,n)};case 2:return function(n,i){return e.call(t,n,i)};case 3:return function(n,i,r){return e.call(t,n,i,r)}}return function(){return e.apply(t,arguments)}},Fe=function(e){return Object(b(e))},Oe=Array.isArray||function(e){return"Array"==y(e)},De=!!Object.getOwnPropertySymbols&&!c((function(){return!String(Symbol())})),Ie=u.Symbol,$e=$("wks"),Ne=function(e){return $e[e]||($e[e]=De&&Ie[e]||(De?Ie:U)("Symbol."+e))},Re=Ne("species"),je=function(e,t){var n;return Oe(e)&&("function"!=typeof(n=e.constructor)||n!==Array&&!Oe(n.prototype)?w(n)&&null===(n=n[Re])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===t?0:t)},ze=[].push,He=function(e){var t=1==e,n=2==e,i=3==e,r=4==e,a=6==e,o=5==e||a;return function(s,l,u,c){for(var h,f,d=Fe(s),v=m(d),p=Me(l,u,3),g=ue(v.length),y=0,_=c||je,b=t?_(s,g):n?_(s,0):void 0;g>y;y++)if((o||y in v)&&(f=p(h=v[y],y,d),e))if(t)b[y]=f;else if(f)switch(e){case 3:return!0;case 5:return h;case 6:return y;case 2:ze.call(b,h)}else if(r)return!1;return a?-1:i||r?r:b}},Ue={forEach:He(0),map:He(1),filter:He(2),some:He(3),every:He(4),find:He(5),findIndex:He(6)},We=function(e,t){var n=[][e];return!n||!c((function(){n.call(null,t||function(){throw 1},1)}))},qe=Ue.forEach,Ge=We("forEach")?function(e){return qe(this,e,arguments.length>1?arguments[1]:void 0)}:[].forEach;Be({target:"Array",proto:!0,forced:[].forEach!=Ge},{forEach:Ge});var Ye=Object.keys||function(e){return ge(e,ye)},Ke=Object.assign,Je=!Ke||c((function(){var e={},t={},n=Symbol();return e[n]=7,"abcdefghijklmnopqrst".split("").forEach((function(e){t[e]=e})),7!=Ke({},e)[n]||"abcdefghijklmnopqrst"!=Ye(Ke({},t)).join("")}))?function(e,t){for(var n=Fe(e),i=arguments.length,r=1,a=be.f,o=v.f;i>r;)for(var s,l=m(arguments[r++]),u=a?Ye(l).concat(a(l)):Ye(l),c=u.length,f=0;c>f;)s=u[f++],h&&!o.call(l,s)||(n[s]=l[s]);return n}:Ke;Be({target:"Object",stat:!0,forced:Object.assign!==Je},{assign:Je});var Xe={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0};for(var Ze in Xe){var Qe=u[Ze],et=Qe&&Qe.prototype;if(et&&et.forEach!==Ge)try{O(et,"forEach",Ge)}catch(e){et.forEach=Ge}}function tt(e){return(tt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function nt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function it(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function rt(e,t,n){return t&&it(e.prototype,t),n&&it(e,n),e}function at(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&st(e,t)}function ot(e){return(ot=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function st(e,t){return(st=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function lt(e,t,n){return(lt=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,n){var i=[null];i.push.apply(i,t);var r=new(Function.bind.apply(e,i));return n&&st(r,n.prototype),r}).apply(null,arguments)}function ut(e){var t="function"==typeof Map?new Map:void 0;return(ut=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,i)}function i(){return lt(e,arguments,ot(this).constructor)}return i.prototype=Object.create(e.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),st(i,e)})(e)}function ct(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ht(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?ct(e):t}function ft(e,t,n){return(ft="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ot(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function dt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],i=!0,r=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);i=!0);}catch(e){r=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var vt,pt,gt=re("navigator","userAgent")||"",yt=u.process,_t=yt&&yt.versions,mt=_t&&_t.v8;mt?pt=(vt=mt.split("."))[0]+vt[1]:gt&&(!(vt=gt.match(/Edge\/(\d+)/))||vt[1]>=74)&&(vt=gt.match(/Chrome\/(\d+)/))&&(pt=vt[1]);var bt=pt&&+pt,kt=Ne("species"),wt=function(e){return bt>=51||!c((function(){var t=[];return(t.constructor={})[kt]=function(){return{foo:1}},1!==t[e](Boolean).foo}))},xt=Ue.filter;Be({target:"Array",proto:!0,forced:!wt("filter")},{filter:function(e){return xt(this,e,arguments.length>1?arguments[1]:void 0)}});var Et=ve.indexOf,St=[].indexOf,Ct=!!St&&1/[1].indexOf(1,-0)<0,Vt=We("indexOf");Be({target:"Array",proto:!0,forced:Ct||Vt},{indexOf:function(e){return Ct?St.apply(this,arguments)||0:Et(this,e,arguments.length>1?arguments[1]:void 0)}});var Lt=function(e,t,n){var i=x(t);i in e?F.f(e,i,p(0,n)):e[i]=n},Tt=Math.max,Pt=Math.min;Be({target:"Array",proto:!0,forced:!wt("splice")},{splice:function(e,t){var n,i,r,a,o,s,l=Fe(this),u=ue(l.length),c=fe(e,u),h=arguments.length;if(0===h?n=i=0:1===h?(n=0,i=u-c):(n=h-2,i=Pt(Tt(se(t),0),u-c)),u+n-i>9007199254740991)throw TypeError("Maximum allowed length exceeded");for(r=je(l,i),a=0;a<i;a++)(o=c+a)in l&&Lt(r,a,l[o]);if(r.length=i,n<i){for(a=c;a<u-i;a++)s=a+n,(o=a+i)in l?l[s]=l[o]:delete l[s];for(a=u;a>u-i+n;a--)delete l[a-1]}else if(n>i)for(a=u-i;a>c;a--)s=a+n-1,(o=a+i-1)in l?l[s]=l[o]:delete l[s];for(a=0;a<n;a++)l[a+c]=arguments[a+2];return l.length=u-i+n,r}});var Bt=Date.prototype,At=Bt.toString,Mt=Bt.getTime;new Date(NaN)+""!="Invalid Date"&&te(Bt,"toString",(function(){var e=Mt.call(this);return e==e?At.call(this):"Invalid Date"}));var Ft=c((function(){Ye(1)}));Be({target:"Object",stat:!0,forced:Ft},{keys:function(e){return Ye(Fe(e))}});var Ot=Ne("toStringTag"),Dt="Arguments"==y(function(){return arguments}()),It=function(e){var t,n,i;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),Ot))?n:Dt?y(t):"Object"==(i=y(t))&&"function"==typeof t.callee?"Arguments":i},$t={};$t[Ne("toStringTag")]="z";var Nt="[object z]"!==String($t)?function(){return"[object "+It(this)+"]"}:$t.toString,Rt=Object.prototype;Nt!==Rt.toString&&te(Rt,"toString",Nt,{unsafe:!0});var jt=function(){var e=A(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t},zt=RegExp.prototype,Ht=zt.toString,Ut=c((function(){return"/a/b"!=Ht.call({source:"a",flags:"b"})})),Wt="toString"!=Ht.name;(Ut||Wt)&&te(RegExp.prototype,"toString",(function(){var e=A(this),t=String(e.source),n=e.flags;return"/"+t+"/"+String(void 0===n&&e instanceof RegExp&&!("flags"in zt)?jt.call(e):n)}),{unsafe:!0});var qt={role:"role",ariaHidden:"aria-hidden",ariaLabel:"aria-label"},Gt=function(){function e(){nt(this,e),this._$root=null,this._superview=null,this._subviews=[],this._model=null,this._focus=!1,this._needsUpdate=!1}return rt(e,null,[{key:"createElement",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=document.createElement(e);if(Object.keys(t).forEach((function(e){var n=t[e];if(void 0===qt[e]){var r=0===e.indexOf("on")?e.toLowerCase():e;i[r]=n}else i.setAttribute(qt[e],n)})),null!==n)switch(Object.prototype.toString.call(n)){case"[object String]":i.innerText=n;break;case"[object Array]":n.forEach((function(e){return e&&i.appendChild(e)}));break;default:i.appendChild(n)}return i}}]),rt(e,[{key:"getElement",value:function(){return null===this._$root&&(this.willRender(),this._$root=this.render(),this.didRender()),this._$root}},{key:"refresh",value:function(){var e=this._$root;return null===e?this:(this._$root=null,this.willRender(),this._$root=this.render(),this.didRender(),this.getSubviews().forEach(this.appendSubviewElement),e&&e.parentNode&&e.parentNode.replaceChild(this._$root,e),this)}},{key:"render",value:function(){return e.createElement("div")}},{key:"setNeedsUpdate",value:function(){var e=this;return this._needsUpdate||(this._needsUpdate=!0,window.requestAnimationFrame((function(){e._needsUpdate=!1,e.update()}))),this}},{key:"update",value:function(){}},{key:"willRender",value:function(){}},{key:"didRender",value:function(){this.update()}},{key:"layout",value:function(){return this._subviews.forEach((function(e){return e.layout()})),this}},{key:"addSubview",value:function(e){e.removeFromSuperview(),this.appendSubviewElement(e),e.setSuperview(this),this._subviews.push(e)}},{key:"getSubviews",value:function(){return this._subviews}},{key:"appendSubviewElement",value:function(e){return e.getElement().parentNode!==this.getElement()&&this.getElement().appendChild(e.getElement()),this}},{key:"removeSubview",value:function(e){var t=this._subviews.indexOf(e);-1!==t&&(this._subviews.splice(t,1),e.setSuperview(null),this.removeSubviewElement(e))}},{key:"removeSubviewElement",value:function(e){var t=e.getElement();return null!==t.parentNode&&t.parentNode.removeChild(e.getElement()),this}},{key:"removeFromSuperview",value:function(){return null!==this._superview&&this._superview.removeSubview(this),this}},{key:"getSuperview",value:function(){return this._superview}},{key:"setSuperview",value:function(e){return this._superview=e,this}},{key:"focus",value:function(){return this.setFocus(!0)}},{key:"blur",value:function(){return this.setFocus(!1)}},{key:"setFocus",value:function(e){return e!==this._focus&&(this._focus=e,e?(null!==this._superview&&this._superview.subviewDidFocus(this),this.didFocus()):(this._subviews.forEach((function(e){return e.blur()})),this.didBlur())),this}},{key:"hasFocus",value:function(){return this._focus}},{key:"subviewDidFocus",value:function(e){this.hasFocus()?this._subviews.filter((function(t){return t!==e})).forEach((function(e){return e.blur()})):this.focus()}},{key:"didFocus",value:function(){}},{key:"didBlur",value:function(){}},{key:"getModel",value:function(){return this._model}},{key:"hasModel",value:function(){return null!==this._model}},{key:"setModel",value:function(e){return this._model=e,this}}]),e}(),Yt=function(e){function t(){return nt(this,t),ht(this,ot(t).apply(this,arguments))}return at(t,e),rt(t,[{key:"render",value:function(){var e=document.querySelector(".app");return window.addEventListener("resize",this.windowDidResize.bind(this),!1),e}},{key:"windowDidResize",value:function(e){this.layout()}}]),t}(Gt),Kt=Ue.map;Be({target:"Array",proto:!0,forced:!wt("map")},{map:function(e){return Kt(this,e,arguments.length>1?arguments[1]:void 0)}});var Jt=F.f,Xt=Function.prototype,Zt=Xt.toString,Qt=/^\s*function ([^ (]*)/;!h||"name"in Xt||Jt(Xt,"name",{configurable:!0,get:function(){try{return Zt.call(this).match(Qt)[1]}catch(e){return""}}});var en=function(){function e(){nt(this,e),this._identifiers=[],this._invokables=[]}return rt(e,[{key:"getIdentifiers",value:function(){return this._identifiers}},{key:"getInvokable",value:function(e){var t=this._identifiers.indexOf(e);if(-1===t)throw new Error("Invokable for '".concat(e,"' has not been registered yet."));return this._invokables[t]}},{key:"register",value:function(e,t){if(this.exists(e))throw new Error("Invokable can't be registered. "+"Identifier ".concat(e," already exists."));return this._identifiers.push(e),this._invokables.push(t),this}},{key:"exists",value:function(e){return-1!==this._identifiers.indexOf(e)}},{key:"create",value:function(e){if(!this.exists(e))throw new Error("Can't create '".concat(e,"', invokable has not been registered."));for(var t=this._identifiers.indexOf(e),n=this._invokables[t],i=arguments.length,r=new Array(i>1?i-1:0),a=1;a<i;a++)r[a-1]=arguments[a];return r.splice(0,0,n),new(Function.prototype.bind.apply(n,r))}}],[{key:"getInstance",value:function(){}}]),e}(),tn=u.Promise,nn=function(e,t,n){for(var i in t)te(e,i,t[i],n);return e},rn=F.f,an=Ne("toStringTag"),on=function(e,t,n){e&&!S(e=n?e:e.prototype,an)&&rn(e,an,{configurable:!0,value:t})},sn=Ne("species"),ln=function(e){var t=re(e),n=F.f;h&&t&&!t[sn]&&n(t,sn,{configurable:!0,get:function(){return this}})},un=function(e,t,n){if(!(e instanceof t))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return e},cn={},hn=Ne("iterator"),fn=Array.prototype,dn=function(e){return void 0!==e&&(cn.Array===e||fn[hn]===e)},vn=Ne("iterator"),pn=function(e){if(null!=e)return e[vn]||e["@@iterator"]||cn[It(e)]},gn=function(e,t,n,i){try{return i?t(A(n)[0],n[1]):t(n)}catch(t){var r=e.return;throw void 0!==r&&A(r.call(e)),t}},yn=r((function(e){var t=function(e,t){this.stopped=e,this.result=t};(e.exports=function(e,n,i,r,a){var o,s,l,u,c,h,f,d=Me(n,i,r?2:1);if(a)o=e;else{if("function"!=typeof(s=pn(e)))throw TypeError("Target is not iterable");if(dn(s)){for(l=0,u=ue(e.length);u>l;l++)if((c=r?d(A(f=e[l])[0],f[1]):d(e[l]))&&c instanceof t)return c;return new t(!1)}o=s.call(e)}for(h=o.next;!(f=h.call(o)).done;)if("object"==typeof(c=gn(o,d,f.value,r))&&c&&c instanceof t)return c;return new t(!1)}).stop=function(e){return new t(!0,e)}})),_n=Ne("iterator"),mn=!1;try{var bn=0,kn={next:function(){return{done:!!bn++}},return:function(){mn=!0}};kn[_n]=function(){return this},Array.from(kn,(function(){throw 2}))}catch(e){}var wn,xn,En,Sn=function(e,t){if(!t&&!mn)return!1;var n=!1;try{var i={};i[_n]=function(){return{next:function(){return{done:n=!0}}}},e(i)}catch(e){}return n},Cn=Ne("species"),Vn=function(e,t){var n,i=A(e).constructor;return void 0===i||null==(n=A(i)[Cn])?t:Ae(n)},Ln=re("document","documentElement"),Tn=/(iphone|ipod|ipad).*applewebkit/i.test(gt),Pn=u.location,Bn=u.setImmediate,An=u.clearImmediate,Mn=u.process,Fn=u.MessageChannel,On=u.Dispatch,Dn=0,In={},$n=function(e){if(In.hasOwnProperty(e)){var t=In[e];delete In[e],t()}},Nn=function(e){return function(){$n(e)}},Rn=function(e){$n(e.data)},jn=function(e){u.postMessage(e+"",Pn.protocol+"//"+Pn.host)};Bn&&An||(Bn=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return In[++Dn]=function(){("function"==typeof e?e:Function(e)).apply(void 0,t)},wn(Dn),Dn},An=function(e){delete In[e]},"process"==y(Mn)?wn=function(e){Mn.nextTick(Nn(e))}:On&&On.now?wn=function(e){On.now(Nn(e))}:Fn&&!Tn?(En=(xn=new Fn).port2,xn.port1.onmessage=Rn,wn=Me(En.postMessage,En,1)):!u.addEventListener||"function"!=typeof postMessage||u.importScripts||c(jn)?wn="onreadystatechange"in L("script")?function(e){Ln.appendChild(L("script")).onreadystatechange=function(){Ln.removeChild(this),$n(e)}}:function(e){setTimeout(Nn(e),0)}:(wn=jn,u.addEventListener("message",Rn,!1)));var zn,Hn,Un,Wn,qn,Gn,Yn,Kn,Jn={set:Bn,clear:An},Xn=B.f,Zn=Jn.set,Qn=u.MutationObserver||u.WebKitMutationObserver,ei=u.process,ti=u.Promise,ni="process"==y(ei),ii=Xn(u,"queueMicrotask"),ri=ii&&ii.value;ri||(zn=function(){var e,t;for(ni&&(e=ei.domain)&&e.exit();Hn;){t=Hn.fn,Hn=Hn.next;try{t()}catch(e){throw Hn?Wn():Un=void 0,e}}Un=void 0,e&&e.enter()},ni?Wn=function(){ei.nextTick(zn)}:Qn&&!Tn?(qn=!0,Gn=document.createTextNode(""),new Qn(zn).observe(Gn,{characterData:!0}),Wn=function(){Gn.data=qn=!qn}):ti&&ti.resolve?(Yn=ti.resolve(void 0),Kn=Yn.then,Wn=function(){Kn.call(Yn,zn)}):Wn=function(){Zn.call(u,zn)});var ai,oi,si,li,ui=ri||function(e){var t={fn:e,next:void 0};Un&&(Un.next=t),Hn||(Hn=t,Wn()),Un=t},ci=function(e){var t,n;this.promise=new e((function(e,i){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=i})),this.resolve=Ae(t),this.reject=Ae(n)},hi={f:function(e){return new ci(e)}},fi=function(e,t){if(A(e),w(t)&&t.constructor===e)return t;var n=hi.f(e);return(0,n.resolve)(t),n.promise},di=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}},vi=Jn.set,pi=Ne("species"),gi="Promise",yi=ee.get,_i=ee.set,mi=ee.getterFor(gi),bi=tn,ki=u.TypeError,wi=u.document,xi=u.process,Ei=$("inspectSource"),Si=re("fetch"),Ci=hi.f,Vi=Ci,Li="process"==y(xi),Ti=!!(wi&&wi.createEvent&&u.dispatchEvent),Pi=Te(gi,(function(){var e=Ei(bi)!==String(bi);if(66===bt)return!0;if(!e&&!Li&&"function"!=typeof PromiseRejectionEvent)return!0;if(bt>=51&&/native code/.test(bi))return!1;var t=bi.resolve(1),n=function(e){e((function(){}),(function(){}))};return(t.constructor={})[pi]=n,!(t.then((function(){}))instanceof n)})),Bi=Pi||!Sn((function(e){bi.all(e).catch((function(){}))})),Ai=function(e){var t;return!(!w(e)||"function"!=typeof(t=e.then))&&t},Mi=function(e,t,n){if(!t.notified){t.notified=!0;var i=t.reactions;ui((function(){for(var r=t.value,a=1==t.state,o=0;i.length>o;){var s,l,u,c=i[o++],h=a?c.ok:c.fail,f=c.resolve,d=c.reject,v=c.domain;try{h?(a||(2===t.rejection&&Ii(e,t),t.rejection=1),!0===h?s=r:(v&&v.enter(),s=h(r),v&&(v.exit(),u=!0)),s===c.promise?d(ki("Promise-chain cycle")):(l=Ai(s))?l.call(s,f,d):f(s)):d(r)}catch(e){v&&!u&&v.exit(),d(e)}}t.reactions=[],t.notified=!1,n&&!t.rejection&&Oi(e,t)}))}},Fi=function(e,t,n){var i,r;Ti?((i=wi.createEvent("Event")).promise=t,i.reason=n,i.initEvent(e,!1,!0),u.dispatchEvent(i)):i={promise:t,reason:n},(r=u["on"+e])?r(i):"unhandledrejection"===e&&function(e,t){var n=u.console;n&&n.error&&(1===arguments.length?n.error(e):n.error(e,t))}("Unhandled promise rejection",n)},Oi=function(e,t){vi.call(u,(function(){var n,i=t.value;if(Di(t)&&(n=di((function(){Li?xi.emit("unhandledRejection",i,e):Fi("unhandledrejection",e,i)})),t.rejection=Li||Di(t)?2:1,n.error))throw n.value}))},Di=function(e){return 1!==e.rejection&&!e.parent},Ii=function(e,t){vi.call(u,(function(){Li?xi.emit("rejectionHandled",e):Fi("rejectionhandled",e,t.value)}))},$i=function(e,t,n,i){return function(r){e(t,n,r,i)}},Ni=function(e,t,n,i){t.done||(t.done=!0,i&&(t=i),t.value=n,t.state=2,Mi(e,t,!0))},Ri=function(e,t,n,i){if(!t.done){t.done=!0,i&&(t=i);try{if(e===n)throw ki("Promise can't be resolved itself");var r=Ai(n);r?ui((function(){var i={done:!1};try{r.call(n,$i(Ri,e,i,t),$i(Ni,e,i,t))}catch(n){Ni(e,i,n,t)}})):(t.value=n,t.state=1,Mi(e,t,!1))}catch(n){Ni(e,{done:!1},n,t)}}};Pi&&(bi=function(e){un(this,bi,gi),Ae(e),ai.call(this);var t=yi(this);try{e($i(Ri,this,t),$i(Ni,this,t))}catch(e){Ni(this,t,e)}},(ai=function(e){_i(this,{type:gi,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=nn(bi.prototype,{then:function(e,t){var n=mi(this),i=Ci(Vn(this,bi));return i.ok="function"!=typeof e||e,i.fail="function"==typeof t&&t,i.domain=Li?xi.domain:void 0,n.parent=!0,n.reactions.push(i),0!=n.state&&Mi(this,n,!1),i.promise},catch:function(e){return this.then(void 0,e)}}),oi=function(){var e=new ai,t=yi(e);this.promise=e,this.resolve=$i(Ri,e,t),this.reject=$i(Ni,e,t)},hi.f=Ci=function(e){return e===bi||e===si?new oi(e):Vi(e)},"function"==typeof tn&&(li=tn.prototype.then,te(tn.prototype,"then",(function(e,t){var n=this;return new bi((function(e,t){li.call(n,e,t)})).then(e,t)}),{unsafe:!0}),"function"==typeof Si&&Be({global:!0,enumerable:!0,forced:!0},{fetch:function(e){return fi(bi,Si.apply(u,arguments))}}))),Be({global:!0,wrap:!0,forced:Pi},{Promise:bi}),on(bi,gi,!1),ln(gi),si=re(gi),Be({target:gi,stat:!0,forced:Pi},{reject:function(e){var t=Ci(this);return t.reject.call(void 0,e),t.promise}}),Be({target:gi,stat:!0,forced:Pi},{resolve:function(e){return fi(this,e)}}),Be({target:gi,stat:!0,forced:Bi},{all:function(e){var t=this,n=Ci(t),i=n.resolve,r=n.reject,a=di((function(){var n=Ae(t.resolve),a=[],o=0,s=1;yn(e,(function(e){var l=o++,u=!1;a.push(void 0),s++,n.call(t,e).then((function(e){u||(u=!0,a[l]=e,--s||i(a))}),r)})),--s||i(a)}));return a.error&&r(a.value),n.promise},race:function(e){var t=this,n=Ci(t),i=n.reject,r=di((function(){var r=Ae(t.resolve);yn(e,(function(e){r.call(t,e).then(n.resolve,i)}))}));return r.error&&i(r.value),n.promise}});r((function(e){var t=function(e){var t,n=Object.prototype,i=n.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},a=r.iterator||"@@iterator",o=r.asyncIterator||"@@asyncIterator",s=r.toStringTag||"@@toStringTag";function l(e,t,n,i){var r=t&&t.prototype instanceof p?t:p,a=Object.create(r.prototype),o=new V(i||[]);return a._invoke=function(e,t,n){var i=c;return function(r,a){if(i===f)throw new Error("Generator is already running");if(i===d){if("throw"===r)throw a;return T()}for(n.method=r,n.arg=a;;){var o=n.delegate;if(o){var s=E(o,n);if(s){if(s===v)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===c)throw i=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=f;var l=u(e,t,n);if("normal"===l.type){if(i=n.done?d:h,l.arg===v)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i=d,n.method="throw",n.arg=l.arg)}}}(e,n,o),a}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var c="suspendedStart",h="suspendedYield",f="executing",d="completed",v={};function p(){}function g(){}function y(){}var _={};_[a]=function(){return this};var m=Object.getPrototypeOf,b=m&&m(m(L([])));b&&b!==n&&i.call(b,a)&&(_=b);var k=y.prototype=p.prototype=Object.create(_);function w(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function x(e){var t;this._invoke=function(n,r){function a(){return new Promise((function(t,a){!function t(n,r,a,o){var s=u(e[n],e,r);if("throw"!==s.type){var l=s.arg,c=l.value;return c&&"object"==typeof c&&i.call(c,"__await")?Promise.resolve(c.__await).then((function(e){t("next",e,a,o)}),(function(e){t("throw",e,a,o)})):Promise.resolve(c).then((function(e){l.value=e,a(l)}),(function(e){return t("throw",e,a,o)}))}o(s.arg)}(n,r,t,a)}))}return t=t?t.then(a,a):a()}}function E(e,n){var i=e.iterator[n.method];if(i===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,E(e,n),"throw"===n.method))return v;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var r=u(i,e.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,v;var a=r.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function V(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function L(e){if(e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function n(){for(;++r<e.length;)if(i.call(e,r))return n.value=e[r],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}return{next:T}}function T(){return{value:t,done:!0}}return g.prototype=k.constructor=y,y.constructor=g,y[s]=g.displayName="GeneratorFunction",e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,s in e||(e[s]="GeneratorFunction")),e.prototype=Object.create(k),e},e.awrap=function(e){return{__await:e}},w(x.prototype),x.prototype[o]=function(){return this},e.AsyncIterator=x,e.async=function(t,n,i,r){var a=new x(l(t,n,i,r));return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},w(k),k[s]="Generator",k[a]=function(){return this},k.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var i=t.pop();if(i in e)return n.value=i,n.done=!1,n}return n.done=!0,n}},e.values=L,V.prototype={constructor:V,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(C),!e)for(var n in this)"t"===n.charAt(0)&&i.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function r(i,r){return s.type="throw",s.arg=e,n.next=i,r&&(n.method="next",n.arg=t),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var l=i.call(o,"catchLoc"),u=i.call(o,"finallyLoc");if(l&&u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var a=r;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var i=n.completion;if("throw"===i.type){var r=i.arg;C(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,i){return this.delegate={iterator:L(e),resultName:n,nextLoc:i},"next"===this.method&&(this.arg=t),v}},e}(e.exports);try{regeneratorRuntime=t}catch(e){Function("r","regeneratorRuntime = r")(t)}}));var ji=h?Object.defineProperties:function(e,t){A(e);for(var n,i=Ye(t),r=i.length,a=0;r>a;)F.f(e,n=i[a++],t[n]);return e},zi=q("IE_PROTO"),Hi=function(){},Ui=function(){var e,t=L("iframe"),n=ye.length;for(t.style.display="none",Ln.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),Ui=e.F;n--;)delete Ui.prototype[ye[n]];return Ui()},Wi=Object.create||function(e,t){var n;return null!==e?(Hi.prototype=A(e),n=new Hi,Hi.prototype=null,n[zi]=e):n=Ui(),void 0===t?n:ji(n,t)};G[zi]=!0;var qi=me.f,Gi={}.toString,Yi="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],Ki={f:function(e){return Yi&&"[object Window]"==Gi.call(e)?function(e){try{return qi(e)}catch(e){return Yi.slice()}}(e):qi(k(e))}},Ji={f:Ne},Xi=F.f,Zi=function(e){var t=ne.Symbol||(ne.Symbol={});S(t,e)||Xi(t,e,{value:Ji.f(e)})},Qi=Ue.forEach,er=q("hidden"),tr=Ne("toPrimitive"),nr=ee.set,ir=ee.getterFor("Symbol"),rr=Object.prototype,ar=u.Symbol,or=re("JSON","stringify"),sr=B.f,lr=F.f,ur=Ki.f,cr=v.f,hr=$("symbols"),fr=$("op-symbols"),dr=$("string-to-symbol-registry"),vr=$("symbol-to-string-registry"),pr=$("wks"),gr=u.QObject,yr=!gr||!gr.prototype||!gr.prototype.findChild,_r=h&&c((function(){return 7!=Wi(lr({},"a",{get:function(){return lr(this,"a",{value:7}).a}})).a}))?function(e,t,n){var i=sr(rr,t);i&&delete rr[t],lr(e,t,n),i&&e!==rr&&lr(rr,t,i)}:lr,mr=function(e,t){var n=hr[e]=Wi(ar.prototype);return nr(n,{type:"Symbol",tag:e,description:t}),h||(n.description=t),n},br=De&&"symbol"==typeof ar.iterator?function(e){return"symbol"==typeof e}:function(e){return Object(e)instanceof ar},kr=function(e,t,n){e===rr&&kr(fr,t,n),A(e);var i=x(t,!0);return A(n),S(hr,i)?(n.enumerable?(S(e,er)&&e[er][i]&&(e[er][i]=!1),n=Wi(n,{enumerable:p(0,!1)})):(S(e,er)||lr(e,er,p(1,{})),e[er][i]=!0),_r(e,i,n)):lr(e,i,n)},wr=function(e,t){A(e);var n=k(t),i=Ye(n).concat(Cr(n));return Qi(i,(function(t){h&&!xr.call(n,t)||kr(e,t,n[t])})),e},xr=function(e){var t=x(e,!0),n=cr.call(this,t);return!(this===rr&&S(hr,t)&&!S(fr,t))&&(!(n||!S(this,t)||!S(hr,t)||S(this,er)&&this[er][t])||n)},Er=function(e,t){var n=k(e),i=x(t,!0);if(n!==rr||!S(hr,i)||S(fr,i)){var r=sr(n,i);return!r||!S(hr,i)||S(n,er)&&n[er][i]||(r.enumerable=!0),r}},Sr=function(e){var t=ur(k(e)),n=[];return Qi(t,(function(e){S(hr,e)||S(G,e)||n.push(e)})),n},Cr=function(e){var t=e===rr,n=ur(t?fr:k(e)),i=[];return Qi(n,(function(e){!S(hr,e)||t&&!S(rr,e)||i.push(hr[e])})),i};if(De||(te((ar=function(){if(this instanceof ar)throw TypeError("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,t=U(e),n=function(e){this===rr&&n.call(fr,e),S(this,er)&&S(this[er],t)&&(this[er][t]=!1),_r(this,t,p(1,e))};return h&&yr&&_r(rr,t,{configurable:!0,set:n}),mr(t,e)}).prototype,"toString",(function(){return ir(this).tag})),v.f=xr,F.f=kr,B.f=Er,me.f=Ki.f=Sr,be.f=Cr,h&&(lr(ar.prototype,"description",{configurable:!0,get:function(){return ir(this).description}}),te(rr,"propertyIsEnumerable",xr,{unsafe:!0})),Ji.f=function(e){return mr(Ne(e),e)}),Be({global:!0,wrap:!0,forced:!De,sham:!De},{Symbol:ar}),Qi(Ye(pr),(function(e){Zi(e)})),Be({target:"Symbol",stat:!0,forced:!De},{for:function(e){var t=String(e);if(S(dr,t))return dr[t];var n=ar(t);return dr[t]=n,vr[n]=t,n},keyFor:function(e){if(!br(e))throw TypeError(e+" is not a symbol");if(S(vr,e))return vr[e]},useSetter:function(){yr=!0},useSimple:function(){yr=!1}}),Be({target:"Object",stat:!0,forced:!De,sham:!h},{create:function(e,t){return void 0===t?Wi(e):wr(Wi(e),t)},defineProperty:kr,defineProperties:wr,getOwnPropertyDescriptor:Er}),Be({target:"Object",stat:!0,forced:!De},{getOwnPropertyNames:Sr,getOwnPropertySymbols:Cr}),Be({target:"Object",stat:!0,forced:c((function(){be.f(1)}))},{getOwnPropertySymbols:function(e){return be.f(Fe(e))}}),or){var Vr=!De||c((function(){var e=ar();return"[null]"!=or([e])||"{}"!=or({a:e})||"{}"!=or(Object(e))}));Be({target:"JSON",stat:!0,forced:Vr},{stringify:function(e,t,n){for(var i,r=[e],a=1;arguments.length>a;)r.push(arguments[a++]);if(i=t,(w(t)||void 0!==e)&&!br(e))return Oe(t)||(t=function(e,t){if("function"==typeof i&&(t=i.call(this,e,t)),!br(t))return t}),r[1]=t,or.apply(null,r)}})}ar.prototype[tr]||O(ar.prototype,tr,ar.prototype.valueOf),on(ar,"Symbol"),G[er]=!0;var Lr=F.f,Tr=u.Symbol;if(h&&"function"==typeof Tr&&(!("description"in Tr.prototype)||void 0!==Tr().description)){var Pr={},Br=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),t=this instanceof Br?new Tr(e):void 0===e?Tr():Tr(e);return""===e&&(Pr[t]=!0),t};we(Br,Tr);var Ar=Br.prototype=Tr.prototype;Ar.constructor=Br;var Mr=Ar.toString,Fr="Symbol(test)"==String(Tr("test")),Or=/^Symbol\((.*)\)[^)]+$/;Lr(Ar,"description",{configurable:!0,get:function(){var e=w(this)?this.valueOf():this,t=Mr.call(e);if(S(Pr,e))return"";var n=Fr?t.slice(7,-1):t.replace(Or,"$1");return""===n?void 0:n}}),Be({global:!0,forced:!0},{Symbol:Br})}Zi("iterator");var Dr=Ne("unscopables"),Ir=Array.prototype;null==Ir[Dr]&&O(Ir,Dr,Wi(null));var $r,Nr,Rr,jr=function(e){Ir[Dr][e]=!0},zr=!c((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})),Hr=q("IE_PROTO"),Ur=Object.prototype,Wr=zr?Object.getPrototypeOf:function(e){return e=Fe(e),S(e,Hr)?e[Hr]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?Ur:null},qr=Ne("iterator"),Gr=!1;[].keys&&("next"in(Rr=[].keys())?(Nr=Wr(Wr(Rr)))!==Object.prototype&&($r=Nr):Gr=!0),null==$r&&($r={}),S($r,qr)||O($r,qr,(function(){return this}));var Yr={IteratorPrototype:$r,BUGGY_SAFARI_ITERATORS:Gr},Kr=Yr.IteratorPrototype,Jr=function(){return this},Xr=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),t=n instanceof Array}catch(e){}return function(n,i){return A(n),function(e){if(!w(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype")}(i),t?e.call(n,i):n.__proto__=i,n}}():void 0),Zr=Yr.IteratorPrototype,Qr=Yr.BUGGY_SAFARI_ITERATORS,ea=Ne("iterator"),ta=function(){return this},na=function(e,t,n,i,r,a,o){!function(e,t,n){var i=t+" Iterator";e.prototype=Wi(Kr,{next:p(1,n)}),on(e,i,!1),cn[i]=Jr}(n,t,i);var s,l,u,c=function(e){if(e===r&&g)return g;if(!Qr&&e in d)return d[e];switch(e){case"keys":case"values":case"entries":return function(){return new n(this,e)}}return function(){return new n(this)}},h=t+" Iterator",f=!1,d=e.prototype,v=d[ea]||d["@@iterator"]||r&&d[r],g=!Qr&&v||c(r),y="Array"==t&&d.entries||v;if(y&&(s=Wr(y.call(new e)),Zr!==Object.prototype&&s.next&&(Wr(s)!==Zr&&(Xr?Xr(s,Zr):"function"!=typeof s[ea]&&O(s,ea,ta)),on(s,h,!0))),"values"==r&&v&&"values"!==v.name&&(f=!0,g=function(){return v.call(this)}),d[ea]!==g&&O(d,ea,g),cn[t]=g,r)if(l={values:c("values"),keys:a?g:c("keys"),entries:c("entries")},o)for(u in l)!Qr&&!f&&u in d||te(d,u,l[u]);else Be({target:t,proto:!0,forced:Qr||f},l);return l},ia=ee.set,ra=ee.getterFor("Array Iterator"),aa=na(Array,"Array",(function(e,t){ia(this,{type:"Array Iterator",target:k(e),index:0,kind:t})}),(function(){var e=ra(this),t=e.target,n=e.kind,i=e.index++;return!t||i>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:i,done:!1}:"values"==n?{value:t[i],done:!1}:{value:[i,t[i]],done:!1}}),"values");cn.Arguments=cn.Array,jr("keys"),jr("values"),jr("entries");var oa=[].join,sa=m!=Object,la=We("join",",");Be({target:"Array",proto:!0,forced:sa||la},{join:function(e){return oa.call(k(this),void 0===e?",":e)}});var ua=Ne("species"),ca=[].slice,ha=Math.max;Be({target:"Array",proto:!0,forced:!wt("slice")},{slice:function(e,t){var n,i,r,a=k(this),o=ue(a.length),s=fe(e,o),l=fe(void 0===t?o:t,o);if(Oe(a)&&("function"!=typeof(n=a.constructor)||n!==Array&&!Oe(n.prototype)?w(n)&&null===(n=n[ua])&&(n=void 0):n=void 0,n===Array||void 0===n))return ca.call(a,s,l);for(i=new(void 0===n?Array:n)(ha(l-s,0)),r=0;s<l;s++,r++)s in a&&Lt(i,r,a[s]);return i.length=r,i}});var fa,da=F.f,va=u.DataView,pa=va&&va.prototype,ga=u.Int8Array,ya=ga&&ga.prototype,_a=u.Uint8ClampedArray,ma=_a&&_a.prototype,ba=ga&&Wr(ga),ka=ya&&Wr(ya),wa=Object.prototype,xa=wa.isPrototypeOf,Ea=Ne("toStringTag"),Sa=U("TYPED_ARRAY_TAG"),Ca=!(!u.ArrayBuffer||!va),Va=Ca&&!!Xr&&"Opera"!==It(u.opera),La=!1,Ta={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},Pa=function(e){return w(e)&&S(Ta,It(e))};for(fa in Ta)u[fa]||(Va=!1);if((!Va||"function"!=typeof ba||ba===Function.prototype)&&(ba=function(){throw TypeError("Incorrect invocation")},Va))for(fa in Ta)u[fa]&&Xr(u[fa],ba);if((!Va||!ka||ka===wa)&&(ka=ba.prototype,Va))for(fa in Ta)u[fa]&&Xr(u[fa].prototype,ka);if(Va&&Wr(ma)!==ka&&Xr(ma,ka),h&&!S(ka,Ea))for(fa in La=!0,da(ka,Ea,{get:function(){return w(this)?this[Sa]:void 0}}),Ta)u[fa]&&O(u[fa],Sa,fa);Ca&&Xr&&Wr(pa)!==wa&&Xr(pa,wa);var Ba={NATIVE_ARRAY_BUFFER:Ca,NATIVE_ARRAY_BUFFER_VIEWS:Va,TYPED_ARRAY_TAG:La&&Sa,aTypedArray:function(e){if(Pa(e))return e;throw TypeError("Target is not a typed array")},aTypedArrayConstructor:function(e){if(Xr){if(xa.call(ba,e))return e}else for(var t in Ta)if(S(Ta,fa)){var n=u[t];if(n&&(e===n||xa.call(n,e)))return e}throw TypeError("Target is not a typed array constructor")},exportProto:function(e,t,n){if(h){if(n)for(var i in Ta){var r=u[i];r&&S(r.prototype,e)&&delete r.prototype[e]}ka[e]&&!n||te(ka,e,n?t:Va&&ya[e]||t)}},exportStatic:function(e,t,n){var i,r;if(h){if(Xr){if(n)for(i in Ta)(r=u[i])&&S(r,e)&&delete r[e];if(ba[e]&&!n)return;try{return te(ba,e,n?t:Va&&ga[e]||t)}catch(e){}}for(i in Ta)!(r=u[i])||r[e]&&!n||te(r,e,t)}},isView:function(e){var t=It(e);return"DataView"===t||S(Ta,t)},isTypedArray:Pa,TypedArray:ba,TypedArrayPrototype:ka},Aa=function(e){if(void 0===e)return 0;var t=se(e),n=ue(t);if(t!==n)throw RangeError("Wrong length or index");return n},Ma=function(e){for(var t=Fe(this),n=ue(t.length),i=arguments.length,r=fe(i>1?arguments[1]:void 0,n),a=i>2?arguments[2]:void 0,o=void 0===a?n:fe(a,n);o>r;)t[r++]=e;return t},Fa=Ba.NATIVE_ARRAY_BUFFER,Oa=me.f,Da=F.f,Ia=ee.get,$a=ee.set,Na=u.ArrayBuffer,Ra=Na,ja=u.DataView,za=u.Math,Ha=u.RangeError,Ua=za.abs,Wa=za.pow,qa=za.floor,Ga=za.log,Ya=za.LN2,Ka=function(e,t,n){var i,r,a,o=new Array(n),s=8*n-t-1,l=(1<<s)-1,u=l>>1,c=23===t?Wa(2,-24)-Wa(2,-77):0,h=e<0||0===e&&1/e<0?1:0,f=0;for((e=Ua(e))!=e||e===1/0?(r=e!=e?1:0,i=l):(i=qa(Ga(e)/Ya),e*(a=Wa(2,-i))<1&&(i--,a*=2),(e+=i+u>=1?c/a:c*Wa(2,1-u))*a>=2&&(i++,a/=2),i+u>=l?(r=0,i=l):i+u>=1?(r=(e*a-1)*Wa(2,t),i+=u):(r=e*Wa(2,u-1)*Wa(2,t),i=0));t>=8;o[f++]=255&r,r/=256,t-=8);for(i=i<<t|r,s+=t;s>0;o[f++]=255&i,i/=256,s-=8);return o[--f]|=128*h,o},Ja=function(e,t){var n,i=e.length,r=8*i-t-1,a=(1<<r)-1,o=a>>1,s=r-7,l=i-1,u=e[l--],c=127&u;for(u>>=7;s>0;c=256*c+e[l],l--,s-=8);for(n=c&(1<<-s)-1,c>>=-s,s+=t;s>0;n=256*n+e[l],l--,s-=8);if(0===c)c=1-o;else{if(c===a)return n?NaN:u?-1/0:1/0;n+=Wa(2,t),c-=o}return(u?-1:1)*n*Wa(2,c-t)},Xa=function(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]},Za=function(e){return[255&e]},Qa=function(e){return[255&e,e>>8&255]},eo=function(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]},to=function(e){return Ka(e,23,4)},no=function(e){return Ka(e,52,8)},io=function(e,t){Da(e.prototype,t,{get:function(){return Ia(this)[t]}})},ro=function(e,t,n,i){var r=Aa(+n),a=Ia(e);if(r+t>a.byteLength)throw Ha("Wrong index");var o=Ia(a.buffer).bytes,s=r+a.byteOffset,l=o.slice(s,s+t);return i?l:l.reverse()},ao=function(e,t,n,i,r,a){var o=Aa(+n),s=Ia(e);if(o+t>s.byteLength)throw Ha("Wrong index");for(var l=Ia(s.buffer).bytes,u=o+s.byteOffset,c=i(+r),h=0;h<t;h++)l[u+h]=c[a?h:t-h-1]};if(Fa){if(!c((function(){Na(1)}))||!c((function(){new Na(-1)}))||c((function(){return new Na,new Na(1.5),new Na(NaN),"ArrayBuffer"!=Na.name}))){for(var oo,so=(Ra=function(e){return un(this,Ra),new Na(Aa(e))}).prototype=Na.prototype,lo=Oa(Na),uo=0;lo.length>uo;)(oo=lo[uo++])in Ra||O(Ra,oo,Na[oo]);so.constructor=Ra}var co=new ja(new Ra(2)),ho=ja.prototype.setInt8;co.setInt8(0,2147483648),co.setInt8(1,2147483649),!co.getInt8(0)&&co.getInt8(1)||nn(ja.prototype,{setInt8:function(e,t){ho.call(this,e,t<<24>>24)},setUint8:function(e,t){ho.call(this,e,t<<24>>24)}},{unsafe:!0})}else Ra=function(e){un(this,Ra,"ArrayBuffer");var t=Aa(e);$a(this,{bytes:Ma.call(new Array(t),0),byteLength:t}),h||(this.byteLength=t)},ja=function(e,t,n){un(this,ja,"DataView"),un(e,Ra,"DataView");var i=Ia(e).byteLength,r=se(t);if(r<0||r>i)throw Ha("Wrong offset");if(r+(n=void 0===n?i-r:ue(n))>i)throw Ha("Wrong length");$a(this,{buffer:e,byteLength:n,byteOffset:r}),h||(this.buffer=e,this.byteLength=n,this.byteOffset=r)},h&&(io(Ra,"byteLength"),io(ja,"buffer"),io(ja,"byteLength"),io(ja,"byteOffset")),nn(ja.prototype,{getInt8:function(e){return ro(this,1,e)[0]<<24>>24},getUint8:function(e){return ro(this,1,e)[0]},getInt16:function(e){var t=ro(this,2,e,arguments.length>1?arguments[1]:void 0);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=ro(this,2,e,arguments.length>1?arguments[1]:void 0);return t[1]<<8|t[0]},getInt32:function(e){return Xa(ro(this,4,e,arguments.length>1?arguments[1]:void 0))},getUint32:function(e){return Xa(ro(this,4,e,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(e){return Ja(ro(this,4,e,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(e){return Ja(ro(this,8,e,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(e,t){ao(this,1,e,Za,t)},setUint8:function(e,t){ao(this,1,e,Za,t)},setInt16:function(e,t){ao(this,2,e,Qa,t,arguments.length>2?arguments[2]:void 0)},setUint16:function(e,t){ao(this,2,e,Qa,t,arguments.length>2?arguments[2]:void 0)},setInt32:function(e,t){ao(this,4,e,eo,t,arguments.length>2?arguments[2]:void 0)},setUint32:function(e,t){ao(this,4,e,eo,t,arguments.length>2?arguments[2]:void 0)},setFloat32:function(e,t){ao(this,4,e,to,t,arguments.length>2?arguments[2]:void 0)},setFloat64:function(e,t){ao(this,8,e,no,t,arguments.length>2?arguments[2]:void 0)}});on(Ra,"ArrayBuffer"),on(ja,"DataView");var fo={ArrayBuffer:Ra,DataView:ja},vo=fo.ArrayBuffer,po=fo.DataView,go=vo.prototype.slice,yo=c((function(){return!new vo(2).slice(1,void 0).byteLength}));Be({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:yo},{slice:function(e,t){if(void 0!==go&&void 0===t)return go.call(A(this),e);for(var n=A(this).byteLength,i=fe(e,n),r=fe(void 0===t?n:t,n),a=new(Vn(this,vo))(ue(r-i)),o=new po(this),s=new po(a),l=0;i<r;)s.setUint8(l++,o.getUint8(i++));return a}});var _o=RegExp.prototype.exec,mo=String.prototype.replace,bo=_o,ko=function(){var e=/a/,t=/b*/g;return _o.call(e,"a"),_o.call(t,"a"),0!==e.lastIndex||0!==t.lastIndex}(),wo=void 0!==/()??/.exec("")[1];(ko||wo)&&(bo=function(e){var t,n,i,r,a=this;return wo&&(n=new RegExp("^"+a.source+"$(?!\\s)",jt.call(a))),ko&&(t=a.lastIndex),i=_o.call(a,e),ko&&i&&(a.lastIndex=a.global?i.index+i[0].length:t),wo&&i&&i.length>1&&mo.call(i[0],n,(function(){for(r=1;r<arguments.length-2;r++)void 0===arguments[r]&&(i[r]=void 0)})),i});var xo=bo;Be({target:"RegExp",proto:!0,forced:/./.exec!==xo},{exec:xo});var Eo=function(e){return function(t,n){var i,r,a=String(b(t)),o=se(n),s=a.length;return o<0||o>=s?e?"":void 0:(i=a.charCodeAt(o))<55296||i>56319||o+1===s||(r=a.charCodeAt(o+1))<56320||r>57343?e?a.charAt(o):i:e?a.slice(o,o+2):r-56320+(i-55296<<10)+65536}},So={codeAt:Eo(!1),charAt:Eo(!0)},Co=So.charAt,Vo=ee.set,Lo=ee.getterFor("String Iterator");na(String,"String",(function(e){Vo(this,{type:"String Iterator",string:String(e),index:0})}),(function(){var e,t=Lo(this),n=t.string,i=t.index;return i>=n.length?{value:void 0,done:!0}:(e=Co(n,i),t.index+=e.length,{value:e,done:!1})}));var To=Ne("species"),Po=!c((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),Bo=!c((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2!==n.length||"a"!==n[0]||"b"!==n[1]})),Ao=function(e,t,n,i){var r=Ne(e),a=!c((function(){var t={};return t[r]=function(){return 7},7!=""[e](t)})),o=a&&!c((function(){var t=!1,n=/a/;return"split"===e&&((n={}).constructor={},n.constructor[To]=function(){return n},n.flags="",n[r]=/./[r]),n.exec=function(){return t=!0,null},n[r](""),!t}));if(!a||!o||"replace"===e&&!Po||"split"===e&&!Bo){var s=/./[r],l=n(r,""[e],(function(e,t,n,i,r){return t.exec===xo?a&&!r?{done:!0,value:s.call(t,n,i)}:{done:!0,value:e.call(n,t,i)}:{done:!1}})),u=l[0],h=l[1];te(String.prototype,e,u),te(RegExp.prototype,r,2==t?function(e,t){return h.call(e,this,t)}:function(e){return h.call(e,this)}),i&&O(RegExp.prototype[r],"sham",!0)}},Mo=So.charAt,Fo=function(e,t,n){return t+(n?Mo(e,t).length:1)},Oo=function(e,t){var n=e.exec;if("function"==typeof n){var i=n.call(e,t);if("object"!=typeof i)throw TypeError("RegExp exec method returned something other than an Object or null");return i}if("RegExp"!==y(e))throw TypeError("RegExp#exec called on incompatible receiver");return xo.call(e,t)};Ao("match",1,(function(e,t,n){return[function(t){var n=b(this),i=null==t?void 0:t[e];return void 0!==i?i.call(t,n):new RegExp(t)[e](String(n))},function(e){var i=n(t,e,this);if(i.done)return i.value;var r=A(e),a=String(this);if(!r.global)return Oo(r,a);var o=r.unicode;r.lastIndex=0;for(var s,l=[],u=0;null!==(s=Oo(r,a));){var c=String(s[0]);l[u]=c,""===c&&(r.lastIndex=Fo(a,ue(r.lastIndex),o)),u++}return 0===u?null:l}]}));var Do=Ne("match"),Io=function(e){var t;return w(e)&&(void 0!==(t=e[Do])?!!t:"RegExp"==y(e))},$o=[].push,No=Math.min,Ro=!c((function(){return!RegExp(4294967295,"y")}));Ao("split",2,(function(e,t,n){var i;return i="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,n){var i=String(b(this)),r=void 0===n?4294967295:n>>>0;if(0===r)return[];if(void 0===e)return[i];if(!Io(e))return t.call(i,e,r);for(var a,o,s,l=[],u=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),c=0,h=new RegExp(e.source,u+"g");(a=xo.call(h,i))&&!((o=h.lastIndex)>c&&(l.push(i.slice(c,a.index)),a.length>1&&a.index<i.length&&$o.apply(l,a.slice(1)),s=a[0].length,c=o,l.length>=r));)h.lastIndex===a.index&&h.lastIndex++;return c===i.length?!s&&h.test("")||l.push(""):l.push(i.slice(c)),l.length>r?l.slice(0,r):l}:"0".split(void 0,0).length?function(e,n){return void 0===e&&0===n?[]:t.call(this,e,n)}:t,[function(t,n){var r=b(this),a=null==t?void 0:t[e];return void 0!==a?a.call(t,r,n):i.call(String(r),t,n)},function(e,r){var a=n(i,e,this,r,i!==t);if(a.done)return a.value;var o=A(e),s=String(this),l=Vn(o,RegExp),u=o.unicode,c=(o.ignoreCase?"i":"")+(o.multiline?"m":"")+(o.unicode?"u":"")+(Ro?"y":"g"),h=new l(Ro?o:"^(?:"+o.source+")",c),f=void 0===r?4294967295:r>>>0;if(0===f)return[];if(0===s.length)return null===Oo(h,s)?[s]:[];for(var d=0,v=0,p=[];v<s.length;){h.lastIndex=Ro?v:0;var g,y=Oo(h,Ro?s:s.slice(v));if(null===y||(g=No(ue(h.lastIndex+(Ro?0:v)),s.length))===d)v=Fo(s,v,u);else{if(p.push(s.slice(d,v)),p.length===f)return p;for(var _=1;_<=y.length-1;_++)if(p.push(y[_]),p.length===f)return p;v=d=g}}return p.push(s.slice(d)),p}]}),!Ro);var jo=Ba.NATIVE_ARRAY_BUFFER_VIEWS,zo=u.ArrayBuffer,Ho=u.Int8Array,Uo=!jo||!c((function(){Ho(1)}))||!c((function(){new Ho(-1)}))||!Sn((function(e){new Ho,new Ho(null),new Ho(1.5),new Ho(e)}),!0)||c((function(){return 1!==new Ho(new zo(2),1,void 0).length})),Wo=function(e,t){var n=function(e){var t=se(e);if(t<0)throw RangeError("The argument can't be less than 0");return t}(e);if(n%t)throw RangeError("Wrong offset");return n},qo=Ba.aTypedArrayConstructor,Go=function(e){var t,n,i,r,a,o,s=Fe(e),l=arguments.length,u=l>1?arguments[1]:void 0,c=void 0!==u,h=pn(s);if(null!=h&&!dn(h))for(o=(a=h.call(s)).next,s=[];!(r=o.call(a)).done;)s.push(r.value);for(c&&l>2&&(u=Me(u,arguments[2],2)),n=ue(s.length),i=new(qo(this))(n),t=0;n>t;t++)i[t]=c?u(s[t],t):s[t];return i},Yo=function(e,t,n){var i,r;return Xr&&"function"==typeof(i=t.constructor)&&i!==n&&w(r=i.prototype)&&r!==n.prototype&&Xr(e,r),e},Ko=r((function(e){var t=me.f,n=Ue.forEach,i=ee.get,r=ee.set,a=F.f,o=B.f,s=Math.round,l=u.RangeError,c=fo.ArrayBuffer,f=fo.DataView,d=Ba.NATIVE_ARRAY_BUFFER_VIEWS,v=Ba.TYPED_ARRAY_TAG,g=Ba.TypedArray,y=Ba.TypedArrayPrototype,_=Ba.aTypedArrayConstructor,m=Ba.isTypedArray,b=function(e,t){for(var n=0,i=t.length,r=new(_(e))(i);i>n;)r[n]=t[n++];return r},k=function(e,t){a(e,t,{get:function(){return i(this)[t]}})},E=function(e){var t;return e instanceof c||"ArrayBuffer"==(t=It(e))||"SharedArrayBuffer"==t},C=function(e,t){return m(e)&&"symbol"!=typeof t&&t in e&&String(+t)==String(t)},V=function(e,t){return C(e,t=x(t,!0))?p(2,e[t]):o(e,t)},L=function(e,t,n){return!(C(e,t=x(t,!0))&&w(n)&&S(n,"value"))||S(n,"get")||S(n,"set")||n.configurable||S(n,"writable")&&!n.writable||S(n,"enumerable")&&!n.enumerable?a(e,t,n):(e[t]=n.value,e)};h?(d||(B.f=V,F.f=L,k(y,"buffer"),k(y,"byteOffset"),k(y,"byteLength"),k(y,"length")),Be({target:"Object",stat:!0,forced:!d},{getOwnPropertyDescriptor:V,defineProperty:L}),e.exports=function(e,o,h,p){var _=e+(p?"Clamped":"")+"Array",k="get"+e,x="set"+e,S=u[_],C=S,V=C&&C.prototype,L={},T=function(e,t){a(e,t,{get:function(){return function(e,t){var n=i(e);return n.view[k](t*o+n.byteOffset,!0)}(this,t)},set:function(e){return function(e,t,n){var r=i(e);p&&(n=(n=s(n))<0?0:n>255?255:255&n),r.view[x](t*o+r.byteOffset,n,!0)}(this,t,e)},enumerable:!0})};d?Uo&&(C=h((function(e,t,n,i){return un(e,C,_),Yo(w(t)?E(t)?void 0!==i?new S(t,Wo(n,o),i):void 0!==n?new S(t,Wo(n,o)):new S(t):m(t)?b(C,t):Go.call(C,t):new S(Aa(t)),e,C)})),Xr&&Xr(C,g),n(t(S),(function(e){e in C||O(C,e,S[e])})),C.prototype=V):(C=h((function(e,t,n,i){un(e,C,_);var a,s,u,h=0,d=0;if(w(t)){if(!E(t))return m(t)?b(C,t):Go.call(C,t);a=t,d=Wo(n,o);var v=t.byteLength;if(void 0===i){if(v%o)throw l("Wrong length");if((s=v-d)<0)throw l("Wrong length")}else if((s=ue(i)*o)+d>v)throw l("Wrong length");u=s/o}else u=Aa(t),a=new c(s=u*o);for(r(e,{buffer:a,byteOffset:d,byteLength:s,length:u,view:new f(a)});h<u;)T(e,h++)})),Xr&&Xr(C,g),V=C.prototype=Wi(y)),V.constructor!==C&&O(V,"constructor",C),v&&O(V,v,_),L[_]=C,Be({global:!0,forced:C!=S,sham:!d},L),"BYTES_PER_ELEMENT"in C||O(C,"BYTES_PER_ELEMENT",o),"BYTES_PER_ELEMENT"in V||O(V,"BYTES_PER_ELEMENT",o),ln(_)}):e.exports=function(){}}));Ko("Uint8",1,(function(e){return function(t,n,i){return e(this,t,n,i)}}));var Jo=Math.min,Xo=[].copyWithin||function(e,t){var n=Fe(this),i=ue(n.length),r=fe(e,i),a=fe(t,i),o=arguments.length>2?arguments[2]:void 0,s=Jo((void 0===o?i:fe(o,i))-a,i-r),l=1;for(a<r&&r<a+s&&(l=-1,a+=s-1,r+=s-1);s-- >0;)a in n?n[r]=n[a]:delete n[r],r+=l,a+=l;return n},Zo=Ba.aTypedArray;Ba.exportProto("copyWithin",(function(e,t){return Xo.call(Zo(this),e,t,arguments.length>2?arguments[2]:void 0)}));var Qo=Ue.every,es=Ba.aTypedArray;Ba.exportProto("every",(function(e){return Qo(es(this),e,arguments.length>1?arguments[1]:void 0)}));var ts=Ba.aTypedArray;Ba.exportProto("fill",(function(e){return Ma.apply(ts(this),arguments)}));var ns=Ue.filter,is=Ba.aTypedArray,rs=Ba.aTypedArrayConstructor;Ba.exportProto("filter",(function(e){for(var t=ns(is(this),e,arguments.length>1?arguments[1]:void 0),n=Vn(this,this.constructor),i=0,r=t.length,a=new(rs(n))(r);r>i;)a[i]=t[i++];return a}));var as=Ue.find,os=Ba.aTypedArray;Ba.exportProto("find",(function(e){return as(os(this),e,arguments.length>1?arguments[1]:void 0)}));var ss=Ue.findIndex,ls=Ba.aTypedArray;Ba.exportProto("findIndex",(function(e){return ss(ls(this),e,arguments.length>1?arguments[1]:void 0)}));var us=Ue.forEach,cs=Ba.aTypedArray;Ba.exportProto("forEach",(function(e){us(cs(this),e,arguments.length>1?arguments[1]:void 0)}));var hs=ve.includes,fs=Ba.aTypedArray;Ba.exportProto("includes",(function(e){return hs(fs(this),e,arguments.length>1?arguments[1]:void 0)}));var ds=ve.indexOf,vs=Ba.aTypedArray;Ba.exportProto("indexOf",(function(e){return ds(vs(this),e,arguments.length>1?arguments[1]:void 0)}));var ps=Ne("iterator"),gs=u.Uint8Array,ys=aa.values,_s=aa.keys,ms=aa.entries,bs=Ba.aTypedArray,ks=Ba.exportProto,ws=gs&&gs.prototype[ps],xs=!!ws&&("values"==ws.name||null==ws.name),Es=function(){return ys.call(bs(this))};ks("entries",(function(){return ms.call(bs(this))})),ks("keys",(function(){return _s.call(bs(this))})),ks("values",Es,!xs),ks(ps,Es,!xs);var Ss=Ba.aTypedArray,Cs=[].join;Ba.exportProto("join",(function(e){return Cs.apply(Ss(this),arguments)}));var Vs=Math.min,Ls=[].lastIndexOf,Ts=!!Ls&&1/[1].lastIndexOf(1,-0)<0,Ps=We("lastIndexOf"),Bs=Ts||Ps?function(e){if(Ts)return Ls.apply(this,arguments)||0;var t=k(this),n=ue(t.length),i=n-1;for(arguments.length>1&&(i=Vs(i,se(arguments[1]))),i<0&&(i=n+i);i>=0;i--)if(i in t&&t[i]===e)return i||0;return-1}:Ls,As=Ba.aTypedArray;Ba.exportProto("lastIndexOf",(function(e){return Bs.apply(As(this),arguments)}));var Ms=Ue.map,Fs=Ba.aTypedArray,Os=Ba.aTypedArrayConstructor;Ba.exportProto("map",(function(e){return Ms(Fs(this),e,arguments.length>1?arguments[1]:void 0,(function(e,t){return new(Os(Vn(e,e.constructor)))(t)}))}));var Ds=function(e){return function(t,n,i,r){Ae(n);var a=Fe(t),o=m(a),s=ue(a.length),l=e?s-1:0,u=e?-1:1;if(i<2)for(;;){if(l in o){r=o[l],l+=u;break}if(l+=u,e?l<0:s<=l)throw TypeError("Reduce of empty array with no initial value")}for(;e?l>=0:s>l;l+=u)l in o&&(r=n(r,o[l],l,a));return r}},Is={left:Ds(!1),right:Ds(!0)},$s=Is.left,Ns=Ba.aTypedArray;Ba.exportProto("reduce",(function(e){return $s(Ns(this),e,arguments.length,arguments.length>1?arguments[1]:void 0)}));var Rs=Is.right,js=Ba.aTypedArray;Ba.exportProto("reduceRight",(function(e){return Rs(js(this),e,arguments.length,arguments.length>1?arguments[1]:void 0)}));var zs=Ba.aTypedArray,Hs=Math.floor;Ba.exportProto("reverse",(function(){for(var e,t=zs(this).length,n=Hs(t/2),i=0;i<n;)e=this[i],this[i++]=this[--t],this[t]=e;return this}));var Us=Ba.aTypedArray,Ws=c((function(){new Int8Array(1).set({})}));Ba.exportProto("set",(function(e){Us(this);var t=Wo(arguments.length>1?arguments[1]:void 0,1),n=this.length,i=Fe(e),r=ue(i.length),a=0;if(r+t>n)throw RangeError("Wrong length");for(;a<r;)this[t+a]=i[a++]}),Ws);var qs=Ba.aTypedArray,Gs=Ba.aTypedArrayConstructor,Ys=[].slice,Ks=c((function(){new Int8Array(1).slice()}));Ba.exportProto("slice",(function(e,t){for(var n=Ys.call(qs(this),e,t),i=Vn(this,this.constructor),r=0,a=n.length,o=new(Gs(i))(a);a>r;)o[r]=n[r++];return o}),Ks);var Js=Ue.some,Xs=Ba.aTypedArray;Ba.exportProto("some",(function(e){return Js(Xs(this),e,arguments.length>1?arguments[1]:void 0)}));var Zs=Ba.aTypedArray,Qs=[].sort;Ba.exportProto("sort",(function(e){return Qs.call(Zs(this),e)}));var el=Ba.aTypedArray;Ba.exportProto("subarray",(function(e,t){var n=el(this),i=n.length,r=fe(e,i);return new(Vn(n,n.constructor))(n.buffer,n.byteOffset+r*n.BYTES_PER_ELEMENT,ue((void 0===t?i:fe(t,i))-r))}));var tl=u.Int8Array,nl=Ba.aTypedArray,il=[].toLocaleString,rl=[].slice,al=!!tl&&c((function(){il.call(new tl(1))})),ol=c((function(){return[1,2].toLocaleString()!=new tl([1,2]).toLocaleString()}))||!c((function(){tl.prototype.toLocaleString.call([1,2])}));Ba.exportProto("toLocaleString",(function(){return il.apply(al?rl.call(nl(this)):nl(this),arguments)}),ol);var sl=u.Uint8Array,ll=sl&&sl.prototype,ul=[].toString,cl=[].join;c((function(){ul.call({})}))&&(ul=function(){return cl.call(this)}),Ba.exportProto("toString",ul,(ll||{}).toString!=ul);var hl=Ne("iterator"),fl=Ne("toStringTag"),dl=aa.values;for(var vl in Xe){var pl=u[vl],gl=pl&&pl.prototype;if(gl){if(gl[hl]!==dl)try{O(gl,hl,dl)}catch(e){gl[hl]=dl}if(gl[fl]||O(gl,fl,vl),Xe[vl])for(var yl in aa)if(gl[yl]!==aa[yl])try{O(gl,yl,aa[yl])}catch(e){gl[yl]=aa[yl]}}}var _l=Ne("isConcatSpreadable"),ml=bt>=51||!c((function(){var e=[];return e[_l]=!1,e.concat()[0]!==e})),bl=wt("concat"),kl=function(e){if(!w(e))return!1;var t=e[_l];return void 0!==t?!!t:Oe(e)};Be({target:"Array",proto:!0,forced:!ml||!bl},{concat:function(e){var t,n,i,r,a,o=Fe(this),s=je(o,0),l=0;for(t=-1,i=arguments.length;t<i;t++)if(a=-1===t?o:arguments[t],kl(a)){if(l+(r=ue(a.length))>9007199254740991)throw TypeError("Maximum allowed index exceeded");for(n=0;n<r;n++,l++)n in a&&Lt(s,l,a[n])}else{if(l>=9007199254740991)throw TypeError("Maximum allowed index exceeded");Lt(s,l++,a)}return s.length=l,s}}),Be({target:"Array",proto:!0},{fill:Ma}),jr("fill");var wl=Ue.findIndex,xl=!0;"findIndex"in[]&&Array(1).findIndex((function(){xl=!1})),Be({target:"Array",proto:!0,forced:xl},{findIndex:function(e){return wl(this,e,arguments.length>1?arguments[1]:void 0)}}),jr("findIndex"),Ko("Uint32",4,(function(e){return function(t,n,i){return e(this,t,n,i)}}));var El=null,Sl=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;nt(this,e),this._seed=t,this._crypto="undefined"!=typeof window&&(window.crypto||window.msCrypto)||null}return rt(e,[{key:"next",value:function(){if(this._crypto){var e=new Uint32Array(1);return this._crypto.getRandomValues(e),e/4294967296}return Math.random()}},{key:"nextFloat",value:function(e,t){return this.next()*(t-e)+e}},{key:"nextInteger",value:function(e,t){return Math.floor(this.next()*(t-e+1))+e}},{key:"nextBytes",value:function(e){var t=new Uint8Array(e);if(this._crypto)this._crypto.getRandomValues(t);else for(var n=0;n<e;n++)t[n]=this.nextInteger(0,255);return t}},{key:"nextBoolean",value:function(){return this.next()>=.5}},{key:"nextChoice",value:function(e){return e[this.nextInteger(0,e.length-1)]}}],[{key:"getInstance",value:function(){return null===El&&(El=new e),El}}]),e}(),Cl=function(){function e(){nt(this,e)}return rt(e,null,[{key:"isEqual",value:function(t,n){if(t===n)return!0;if(null===t&&null===n)return!0;if(null===t||null===n)return!1;if(tt(t)!==tt(n))return!1;if(t instanceof Array){if(t.length!==n.length)return!1;for(var i=-1,r=!0;r&&++i<t.length;)r=e.isEqual(t[i],n[i]);return r}if(t instanceof Object){if("function"==typeof t.isEqualTo)return t.isEqualTo(n);if("function"==typeof n.isEqualTo)return n.isEqualTo(t);for(var a=e.unique(Object.keys(t).concat(Object.keys(n))),o=-1,s=!0;s&&++o<a.length;){var l=a[o];s=e.isEqual(t[l],n[l])}return s}return t instanceof Date&&t.getTime()===n.getTime()}},{key:"isUnique",value:function(e){return-1===e.findIndex((function(t,n){return e.indexOf(t)!==n}))}},{key:"unique",value:function(e){return e.filter((function(t,n){return e.indexOf(t)===n}))}},{key:"shuffle",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;t=t||Sl.getInstance();var n,i,r=e.slice();for(n=r.length-1;n>0;n--){var a=[r[i=t.nextInteger(0,n)],r[n]];r[n]=a[0],r[i]=a[1]}return r}},{key:"chunk",value:function(e,t){for(var n=Math.ceil(e.length/t),i=new Array(n),r=0;r<n;r++)i[r]=e.slice(r*t,(r+1)*t);return i}},{key:"joinSlices",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=e.length,i=t.length,r=[],a=0;a<n;a++)i>0&&a>0&&(r=r.concat(t)),r=r.concat(e[a]);return r}},{key:"indexOfSlice",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(0===t.length)return-1;for(var i=-1,r=n-1;-1===i&&-1!==(r=e.indexOf(t[0],r+1));)this.isEqual(e.slice(r,r+t.length),t)&&(i=r);return i}},{key:"replaceSlice",value:function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=0,r=-1,a=[];-1!==(r=this.indexOfSlice(e,t,r+1));)a=(a=a.concat(e.slice(i,r))).concat(n),i=r+t.length;return a=a.concat(e.slice(i))}},{key:"resizeBitSizedArray",value:function(e,t,n){for(var i,r,a,o,s,l,u,c,h=arguments.length>3&&void 0!==arguments[3]&&arguments[3],f=Math.ceil(e.length*t/n),d=8===n?new Uint8Array(f):new Array(f).fill(0),v=(1<<n)-1,p=0;p<e.length;p++)for(i=e[p],r=p*t,a=(p+1)*t,o=Math.floor(r/n),l=n-a%n,d[s=Math.floor(a/n)]|=i<<l&v,u=i>>n-l,c=s;--c>=o&&u>0;)d[c]|=u&v,u>>=n;if(h){for(var g=d.length-1;0===d[g];)g--;return d.slice(0,g+1)}return d}}]),e}(),Vl=!Sn((function(e){Array.from(e)}));Be({target:"Array",stat:!0,forced:Vl},{from:function(e){var t,n,i,r,a,o=Fe(e),s="function"==typeof this?this:Array,l=arguments.length,u=l>1?arguments[1]:void 0,c=void 0!==u,h=0,f=pn(o);if(c&&(u=Me(u,l>2?arguments[2]:void 0,2)),null==f||s==Array&&dn(f))for(n=new s(t=ue(o.length));t>h;h++)Lt(n,h,c?u(o[h],h):o[h]);else for(a=(r=f.call(o)).next,n=new s;!(i=a.call(r)).done;h++)Lt(n,h,c?gn(r,u,[i.value,h],!0):i.value);return n.length=h,n}});var Ll="\t\n\v\f\r                　\u2028\u2029\ufeff",Tl="["+Ll+"]",Pl=RegExp("^"+Tl+Tl+"*"),Bl=RegExp(Tl+Tl+"*$"),Al=function(e){return function(t){var n=String(b(t));return 1&e&&(n=n.replace(Pl,"")),2&e&&(n=n.replace(Bl,"")),n}},Ml={start:Al(1),end:Al(2),trim:Al(3)},Fl=Ml.trim,Ol=u.parseInt,Dl=/^[+-]?0[Xx]/,Il=8!==Ol(Ll+"08")||22!==Ol(Ll+"0x16")?function(e,t){var n=Fl(String(e));return Ol(n,t>>>0||(Dl.test(n)?16:10))}:Ol;Be({global:!0,forced:parseInt!=Il},{parseInt:Il});var $l="".repeat||function(e){var t=String(b(this)),n="",i=se(e);if(i<0||i==1/0)throw RangeError("Wrong number of repetitions");for(;i>0;(i>>>=1)&&(t+=t))1&i&&(n+=t);return n},Nl=Math.ceil,Rl=function(e){return function(t,n,i){var r,a,o=String(b(t)),s=o.length,l=void 0===i?" ":String(i),u=ue(n);return u<=s||""==l?o:(r=u-s,(a=$l.call(l,Nl(r/l.length))).length>r&&(a=a.slice(0,r)),e?o+a:a+o)}},jl={start:Rl(!1),end:Rl(!0)},zl=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(gt),Hl=jl.end;Be({target:"String",proto:!0,forced:zl},{padEnd:function(e){return Hl(this,e,arguments.length>1?arguments[1]:void 0)}});var Ul=F.f,Wl=me.f,ql=Ne("match"),Gl=u.RegExp,Yl=Gl.prototype,Kl=/a/g,Jl=/a/g,Xl=new Gl(Kl)!==Kl;if(h&&Te("RegExp",!Xl||c((function(){return Jl[ql]=!1,Gl(Kl)!=Kl||Gl(Jl)==Jl||"/a/i"!=Gl(Kl,"i")})))){for(var Zl=function(e,t){var n=this instanceof Zl,i=Io(e),r=void 0===t;return!n&&i&&e.constructor===Zl&&r?e:Yo(Xl?new Gl(i&&!r?e.source:e,t):Gl((i=e instanceof Zl)?e.source:e,i&&r?jt.call(e):t),n?this:Yl,Zl)},Ql=function(e){e in Zl||Ul(Zl,e,{configurable:!0,get:function(){return Gl[e]},set:function(t){Gl[e]=t}})},eu=Wl(Gl),tu=0;eu.length>tu;)Ql(eu[tu++]);Yl.constructor=Zl,Zl.prototype=Yl,te(u,"RegExp",Zl)}ln("RegExp");var nu=Math.max,iu=Math.min,ru=Math.floor,au=/\$([$&'`]|\d\d?|<[^>]*>)/g,ou=/\$([$&'`]|\d\d?)/g;Ao("replace",2,(function(e,t,n){return[function(n,i){var r=b(this),a=null==n?void 0:n[e];return void 0!==a?a.call(n,r,i):t.call(String(r),n,i)},function(e,r){var a=n(t,e,this,r);if(a.done)return a.value;var o=A(e),s=String(this),l="function"==typeof r;l||(r=String(r));var u=o.global;if(u){var c=o.unicode;o.lastIndex=0}for(var h=[];;){var f=Oo(o,s);if(null===f)break;if(h.push(f),!u)break;""===String(f[0])&&(o.lastIndex=Fo(s,ue(o.lastIndex),c))}for(var d,v="",p=0,g=0;g<h.length;g++){f=h[g];for(var y=String(f[0]),_=nu(iu(se(f.index),s.length),0),m=[],b=1;b<f.length;b++)m.push(void 0===(d=f[b])?d:String(d));var k=f.groups;if(l){var w=[y].concat(m,_,s);void 0!==k&&w.push(k);var x=String(r.apply(void 0,w))}else x=i(y,s,_,m,k,r);_>=p&&(v+=s.slice(p,_)+x,p=_+y.length)}return v+s.slice(p)}];function i(e,n,i,r,a,o){var s=i+e.length,l=r.length,u=ou;return void 0!==a&&(a=Fe(a),u=au),t.call(o,u,(function(t,o){var u;switch(o.charAt(0)){case"$":return"$";case"&":return e;case"`":return n.slice(0,i);case"'":return n.slice(s);case"<":u=a[o.slice(1,-1)];break;default:var c=+o;if(0===c)return t;if(c>l){var h=ru(c/10);return 0===h?t:h<=l?void 0===r[h-1]?o.charAt(1):r[h-1]+o.charAt(1):t}u=r[c-1]}return void 0===u?"":u}))}}));var su=0,lu=function(){function e(){nt(this,e)}return rt(e,null,[{key:"camelCaseToRegular",value:function(e){return e.replace(/([a-z])([A-Z])/g,"$1 $2").replace(/\b([A-Z]+)([A-Z])([a-z])/,"$1 $2$3").replace(/^./,(function(e){return e.toUpperCase()}))}},{key:"uniqueId",value:function(){return"u"+(++su).toString(16)}},{key:"chunk",value:function(e,t){return""!==e?e.match(new RegExp(".{1,".concat(t,"}"),"g")):[]}},{key:"isWhitespace",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=e[t];return!!n&&null!==n.match(/\s/)}},{key:"removeWhitespaces",value:function(e){return this.replaceWhitespaces(e,"",!0)}},{key:"normalizeWhitespaces",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.replaceWhitespaces(e," ",t)}},{key:"replaceWhitespaces",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return n?e.replace(/\s+/g,t):e.replace(/\s/g,t)}}]),e}(),uu=function(e){function t(e){var n;return nt(this,t),(n=ht(this,ot(t).call(this,e))).name=n.constructor.name,"function"==typeof Error.captureStackTrace?Error.captureStackTrace(ct(n),n.constructor):n.stack=new Error(e).stack,n}return at(t,e),t}(ut(Error)),cu=function(e){function t(){return nt(this,t),ht(this,ot(t).apply(this,arguments))}return at(t,e),t}(uu),hu=function(e){function t(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return nt(this,t),(n=ht(this,ot(t).call(this,e))).index=i,n}return at(t,e),t}(cu),fu={alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",padding:"=",paddingOptional:!1,foreignCharacters:!1,maxLineLength:null,lineSeparator:"\r\n"},du=function(){function e(){nt(this,e)}return rt(e,null,[{key:"hexStringFromBytes",value:function(e){return Array.from(e).map((function(e){return("0"+e.toString(16)).slice(-2)})).join("")}},{key:"bytesFromHexString",value:function(e){(e=lu.removeWhitespaces(e)).length%2==1&&(e+="0");var t=lu.chunk(e,2).map((function(e,t){var n=parseInt(e,16);if(null===e.match(/[0-9a-f]{2}/i)||isNaN(n))throw new hu("Invalid hex encoded byte '".concat(e,"'"));return n}));return new Uint8Array(t)}},{key:"binaryStringFromBytes",value:function(e){return Array.from(e).map((function(e){return("0000000"+e.toString(2)).slice(-8)})).join("")}},{key:"bytesFromBinaryString",value:function(e){(e=lu.removeWhitespaces(e)).length%8>0&&(e=e.padEnd(e.length-e.length%8+8,"0"));var t=lu.chunk(e,8).map((function(e,t){var n=parseInt(e,2);if(null===e.match(/[0-1]{8}/)||isNaN(n))throw new hu("Invalid binary encoded byte '".concat(e,"'"));return n}));return new Uint8Array(t)}},{key:"base64StringFromBytes",value:function(e){for(var t,n,i,r,a,o,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=Object.assign({},fu,s),u=l.alphabet,c=l.padding,h=l.paddingOptional,f=l.maxLineLength,d=l.lineSeparator,v=!h&&c?c:"",p="",g=0;g<e.length;g+=3)r=(3&(t=e[g]))<<4|(n=g+1<e.length?e[g+1]:NaN)>>4,a=(15&n)<<2|(i=g+2<e.length?e[g+2]:NaN)>>6,o=63&i,p+=u[t>>2]+u[r]+(isNaN(n)?v:u[a])+(isNaN(i)?v:u[o]);if(f){for(var y="",_=0;_<p.length;_+=f)y+=(""!==y?d:"")+p.substr(_,f);p=y}return p}},{key:"bytesFromBase64String",value:function(e){for(var t,n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Object.assign({},fu,i),a=r.alphabet,o=r.padding,s=(r.paddingOptional,r.foreignCharacters),l=r.maxLineLength,u=r.lineSeparator,c=e.length,h=[],f=-1;++f<c;)if(t=e[f],null!==l&&u&&t===u[0]&&e.substr(f,u.length)===u)f=f+u.length-1;else if(t===o);else if(-1!==(n=a.indexOf(t)))h.push(n);else if(!s)throw new hu("Forbidden character '".concat(t,"' at index ").concat(f));var d=(4-h.length%4)%4;if(3===d)throw new hu("A single remaining encoded character in the last quadruple or a padding of 3 characters is not allowed");for(f=0;f<d;f++)h.push(0);var v,p=h.length/4*3,g=new Uint8Array(p);for(f=0;f<h.length;f+=4)g[v=f/4*3]=h[f]<<2|h[f+1]>>4,g[v+1]=(15&h[f+1])<<4|h[f+2]>>2,g[v+2]=(3&h[f+2])<<6|h[f+3];return g.slice(0,p-d)}}]),e}(),vu=function(e){function t(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return nt(this,t),(n=ht(this,ot(t).call(this,e))).byteIndex=i,n}return at(t,e),t}(cu),pu=function(){function e(){nt(this,e)}return rt(e,null,[{key:"validateCodePoint",value:function(e){return isFinite(e)&&e>=0&&e<=1114111&&Math.floor(e)===e}},{key:"validateCodePoints",value:function(t){for(var n=!0,i=0;n&&i<t.length;)n=e.validateCodePoint(t[i]),i++;return n}},{key:"stringFromCodePoints",value:function(e){var t,n,i=new Array(2*e.length),r=0;for(t=0;t<e.length;t++)(n=e[t])<65536?i[r++]=String.fromCharCode(n):(n-=65536,i[r++]=String.fromCharCode(55296+(n>>10)),i[r++]=String.fromCharCode(n%1024+56320));return i.slice(0,r).join("")}},{key:"codePointsFromString",value:function(e){for(var t,n,i=e.length,r=new Array(i),a=0,o=0;o<i;)(t=e.charCodeAt(o++))>=55296&&t<=56319&&o<i?56320==(64512&(n=e.charCodeAt(o++)))?r[a++]=((1023&t)<<10)+(1023&n)+65536:(r[a++]=t,o--):r[a++]=t;return r.slice(0,a)}},{key:"bytesFromCodePoints",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf8";switch(n){case"utf8":return e._encodeCodePointsToUTF8Bytes(t);default:throw new Error("Encoding to '".concat(n,"' is currently not supported."))}}},{key:"codePointsFromBytes",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf8";switch(n){case"utf8":return e._decodeCodePointsFromUTF8Bytes(t);default:throw new Error("Decoding from '".concat(n,"' is currently not supported."))}}},{key:"_encodeCodePointsToUTF8Bytes",value:function(e){var t,n,i=new Uint8Array(4*e.length),r=0;for(t=0;t<e.length;t++)(n=e[t])<=127?i[r++]=n:n<=2047?(i[r++]=192|n>>6,i[r++]=128|63&n):n<=65535?(i[r++]=224|n>>12,i[r++]=128|(4095&n)>>6,i[r++]=128|63&n):(i[r++]=240|n>>18,i[r++]=128|(262143&n)>>12,i[r++]=128|(4095&n)>>6,i[r++]=128|63&n);return i.slice(0,r)}},{key:"_decodeCodePointsFromUTF8Bytes",value:function(e){for(var t,n,i=e.length,r=new Array(i),a=0,o=-1,s=0;++o<i;)if((t=e[o])>127&&t<=191){if(--a<0)throw new vu("Invalid UTF-8 encoded text: "+"Unexpected continuation byte at 0x".concat(o.toString(16)),o);n=n<<6|63&t,0===a&&(r[s++]=n)}else{if(a>0)throw new vu("Invalid UTF-8 encoded text: "+"Continuation byte expected at 0x".concat(o.toString(16)),o);if(t<=127)r[s++]=t;else if(t<=223)n=31&t,a=1;else if(t<=239)n=15&t,a=2;else{if(!(t<=247))throw new vu("Invalid UTF-8 encoded text: "+"Invalid byte ".concat(t," at 0x").concat(o.toString(16)),o);n=7&t,a=3}}if(0!==a)throw new vu("Invalid UTF-8 encoded text: Unexpected end of bytes");return r.slice(0,s)}}]),e}(),gu=null,yu=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf8";if(nt(this,e),this._codePoints=null,this._string=null,this._bytes=null,this._encoding=n,null===t)this._codePoints=[],this._string="",this._bytes=new Uint8Array(0);else{var i=Object.prototype.toString.call(t);switch(i){case"[object Array]":if(!pu.validateCodePoints(t))throw new Error("Chain constructor expects a valid array of code points.");this._codePoints=t;break;case"[object String]":this._string=t;break;case"[object Uint8Array]":this._bytes=t;break;default:throw new Error("Chain constructor expects one optional parameter of type "+"Array, String or Uint8Array. Received unexpected ".concat(i,"."))}}}return rt(e,[{key:"getCodePoints",value:function(){return null===this._codePoints&&(null!==this._string?this._codePoints=pu.codePointsFromString(this._string):this._codePoints=pu.codePointsFromBytes(this._bytes,this._encoding)),this._codePoints}},{key:"getChars",value:function(){return this.getCodePoints().map((function(e){return pu.stringFromCodePoints([e])}))}},{key:Symbol.iterator,value:function(){return this.getCodePoints().values}},{key:"getCodePointAt",value:function(e){return this.getCodePoints()[e]}},{key:"getCharAt",value:function(e){return pu.stringFromCodePoints([this.getCodePointAt(e)])}},{key:"getCharBytesAt",value:function(e){return pu.bytesFromCodePoints([this.getCodePointAt(e)])}},{key:"getLength",value:function(){return this.getCodePoints().length}},{key:"getString",value:function(){return null===this._string&&(this._string=pu.stringFromCodePoints(this.getCodePoints())),this._string}},{key:"toString",value:function(){return this.getString()}},{key:"toLowerCase",value:function(){return e.wrap(this.getString().toLowerCase(),this._encoding)}},{key:"toUpperCase",value:function(){return e.wrap(this.getString().toUpperCase(),this._encoding)}},{key:"split",value:function(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return n=n instanceof e?n.toString():n,this.getString().split(n,i).map((function(n){return e.wrap(n,t._encoding)}))}},{key:"substr",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;if(n<=0||t>=this.getLength())return e.empty();t<0&&(t=Math.max(this.getLength()+t,0));var i=this.getCodePoints().slice(t,n?t+n:void 0);return e.wrap(i,this._encoding)}},{key:"truncate",value:function(t){return this.getLength()>t?e.wrap(this.substr(0,t).getString()+"…",this._encoding):this}},{key:"extend",value:function(t){for(var n,i=this.getCodePoints(),r=e.wrap(t).getCodePoints(),a=i.slice(),o=0;a.length<r.length&&o<r.length;)n=r[o++],-1===i.indexOf(n)&&a.push(n);return e.wrap(a)}},{key:"match",value:function(e){return this.getString().match(e)}},{key:"getDescription",value:function(){return null!==this._string?"String(".concat(this._string,")"):null!==this._codePoints?"CodePoints(".concat(this._codePoints.join(", "),")"):"Bytes(".concat(du.hexStringFromBytes(this._bytes),")")}},{key:"contains",value:function(e){return-1!==this.getString().indexOf(e.toString())}},{key:"indexOfCodePoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return this.getCodePoints().indexOf(e,t)}},{key:"indexOf",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=this.getString(),i=n.indexOf(e.toString(),t);if(-1===i)return-1;var r=n.substr(0,i),a=pu.codePointsFromString(r);return a.length}},{key:"getBytes",value:function(){return null===this._bytes&&(this._bytes=pu.bytesFromCodePoints(this.getCodePoints(),this._encoding)),this._bytes}},{key:"getByteAt",value:function(e){return this.getBytes()[e]}},{key:"getSize",value:function(){return this.getBytes().length}},{key:"needsTextEncoding",value:function(){return null===this._codePoints&&null===this._string}},{key:"needsByteEncoding",value:function(){return null===this._bytes}},{key:"isEmpty",value:function(){return this===gu||null!==this._codePoints&&0===this._codePoints.length||null!==this._string&&""===this._string||null!==this._bytes&&0===this._bytes.length}},{key:"isEqualTo",value:function(t){if(t===this)return!0;if(!(t instanceof e))return!1;if(this.isEmpty()&&t.isEmpty())return!0;if(t.getEncoding()!==this._encoding)return!1;if(null!==this._string&&this._string===t._string)return!0;if(null!==this._bytes&&null!==t._bytes)return Cl.isEqual(this._bytes,t._bytes);try{return Cl.isEqual(this.getCodePoints(),t.getCodePoints())}catch(e){if(e instanceof vu)return!1;throw e}}},{key:"getEncoding",value:function(){return this._encoding}}],[{key:"isEqual",value:function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];if(n.length<2)return!0;var r=n[0];if(!(r instanceof e))return!1;for(var a=!0,o=0;a&&++o<n.length;)a=r.isEqualTo(n[o]);return a}},{key:"wrap",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf8";return t instanceof e?t:null===t||0===t.length?e.empty():new e(t,n)}},{key:"join",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return e.wrap(t.map((function(e){return e.toString()})).join(n))}},{key:"empty",value:function(){return null===gu&&(gu=new e),gu}}]),e}(),_u=[],mu=_u.sort,bu=c((function(){_u.sort(void 0)})),ku=c((function(){_u.sort(null)})),wu=We("sort");Be({target:"Array",proto:!0,forced:bu||!ku||wu},{sort:function(e){return void 0===e?mu.call(Fe(this)):mu.call(Fe(this),Ae(e))}});var xu=function(e){function t(){var e;return nt(this,t),(e=ht(this,ot(t).call(this)))._$message=null,e._message=null,e._id=lu.uniqueId(),e._first=!1,e}return at(t,e),rt(t,[{key:"isFirst",value:function(){return this._first}},{key:"setFirst",value:function(e){return this._first!==e&&(this._first=e,e?this.getElement().classList.add("field--first"):this.getElement().classList.remove("field--first")),this}},{key:"getMessage",value:function(){return this._message}},{key:"setMessage",value:function(e){return this._message=e,this.update()}},{key:"clearMessage",value:function(){return this.setMessage(null)}},{key:"getId",value:function(){return this._id}},{key:"render",value:function(){return Gt.createElement("div",{className:"field"+(this._first?" field--first":"")},[this.renderLabel(),this.renderField()])}},{key:"renderLabel",value:function(){return Gt.createElement("label",{className:"field__label",htmlFor:this.getId()},this.getModel().getLabel())}},{key:"renderField",value:function(){return Gt.createElement("div",{className:"field__field"})}},{key:"renderMessage",value:function(){return null!==this.getMessage()?Gt.createElement("div",{className:"field__message"},this.getMessage()):null}},{key:"didRender",value:function(){ft(ot(t.prototype),"didRender",this).call(this),this.updateValue()}},{key:"update",value:function(){var e=this.getElement();return e.dataset.width=this.getModel().getWidth(),this.hasFocus()?e.classList.add("field--focus"):e.classList.remove("field--focus"),this.getModel().isValid()&&null===this.getMessage()?e.classList.remove("field--invalid"):e.classList.add("field--invalid"),null!==this._$message&&null!==this._$message.parentNode&&this._$message.parentNode.removeChild(this._$message),this._$message=null,this._$message=this.renderMessage(),null!==this._$message&&this.getElement().appendChild(this._$message),this}},{key:"didFocus",value:function(){this.getElement().classList.add("field--focus")}},{key:"didBlur",value:function(){this.getElement().classList.remove("field--focus")}},{key:"updateValue",value:function(){return this}}]),t}(Gt),Eu=function(e){function t(){return nt(this,t),ht(this,ot(t).apply(this,arguments))}return at(t,e),rt(t,[{key:"render",value:function(){return Gt.createElement("div",{className:"form"})}},{key:"appendSubviewElement",value:function(e){if(e instanceof xu){this.getElement();var n=this.getSubviews().filter((function(e){return e instanceof xu}));n.push(e);var i=this.getModel().getFields();n.sort((function(e,t){return i.indexOf(e.getModel())-i.indexOf(t.getModel())}));var r=n.indexOf(e),a=r<n.length-1?n[r+1].getElement():null;this.getElement().insertBefore(e.getElement(),a);var o=0;return n.forEach((function(e){var t=e.getModel().getWidth();(o+=t)===t||o>12?(o=t,e.setFirst(!0)):e.setFirst(!1)})),this}return ft(ot(t.prototype),"appendSubviewElement",this).call(this,e)}}]),t}(Gt),Su='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M16 7H3.83l3.58-3.59L6 2 0 8l6 6 1.41-1.41L3.83 9H16z"/></svg>',Cu={forward:Su,backward:Su,error:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M15 2.41L13.59 1 8 6.59 2.41 1 1 2.41 6.59 8 1 13.59 2.41 15 8 9.41 13.59 15 15 13.59 9.41 8z"/></svg>'},Vu=function(e){function t(){var e;return nt(this,t),(e=ht(this,ot(t).call(this)))._$menu=null,e._$body=null,e._$settings=null,e._$header=null,e._$status=null,e._$statusIcon=null,e._$statusMessage=null,e._menuVisible=!1,e._menuHideHandler=e.toggleMenu.bind(ct(e)),e}return at(t,e),rt(t,[{key:"render",value:function(){this._$settings=this.renderSettings(),this._$header=this.renderHeader();var e=this.getModel().getMeta();return Gt.createElement("div",{className:"brick",role:"region",ariaLabel:"".concat(e.title," ").concat(e.type)},[this._$header,this._$settings,this.renderContent(),this.renderStatus()])}},{key:"renderHeader",value:function(){var e=this;this._$menu=this.renderMenu();var t=Gt.createElement("button",{className:"brick__btn-menu",onClick:function(t){t.preventDefault(),e.toggleMenu()}});t.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><circle cx="8" cy="2" r="1.5"/><circle cx="8" cy="8" r="1.5"/><circle cx="8" cy="14" r="1.5"/></svg>';var n=Gt.createElement("div",{className:"brick__title-caret"});return n.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M3 6l5 5 5-5z"/></svg>',Gt.createElement("header",{className:"brick__header"},[Gt.createElement("button",{className:"brick__title",onClick:function(t){t.preventDefault(),e.getModel().viewReplaceButtonDidClick(e)}},[Gt.createElement("h3",{className:"brick__title-inner"},this.getModel().getTitle()),n]),t])}},{key:"renderMenu",value:function(){var e=this,t=[];return this.getModel().hasPipe()&&(t.push({label:"Remove",name:"remove"}),t.push({label:"Hide",name:"hide"}),t.push({label:"Duplicate",name:"duplicate"})),this.getModel().isRandomizable()&&t.push({label:"Randomize",name:"randomize"}),Gt.createElement("div",{className:"brick__menu menu"},[Gt.createElement("ul",{className:"menu__list"},t.map((function(t){return Gt.createElement("li",{className:"menu__item"},[Gt.createElement("button",{className:"menu__button",onClick:function(n){n.preventDefault(),e.getModel().viewMenuItemDidClick(e,t.name)}},t.label)])})))])}},{key:"renderSettings",value:function(){return Gt.createElement("div",{className:"brick__settings"})}},{key:"renderContent",value:function(){return Gt.createElement("div",{className:"brick__content"})}},{key:"renderStatus",value:function(){return this._$statusIcon=Gt.createElement("div",{className:"brick__status-icon"}),this._$statusMessage=Gt.createElement("div",{className:"brick__status-message"}),this._$status=Gt.createElement("footer",{className:"brick__status brick__status--hidden"},[this._$statusIcon,this._$statusMessage]),this._$status}},{key:"appendSubviewElement",value:function(e){return e instanceof Eu?(this.getElement(),this._$settings.appendChild(e.getElement()),this):ft(ot(t.prototype),"appendSubviewElement",this).call(this,e)}},{key:"didFocus",value:function(){this.getElement().classList.add("brick--focus")}},{key:"didBlur",value:function(){this.getElement().classList.remove("brick--focus")}},{key:"toggleMenu",value:function(){var e=this;this._menuVisible=!this._menuVisible,this._menuVisible?(this._$header.appendChild(this._$menu),this._$menu.getBoundingClientRect(),this._$menu.classList.add("menu--visible"),window.requestAnimationFrame((function(){window.addEventListener("click",e._menuHideHandler)}))):(this._$header.removeChild(this._$menu),window.removeEventListener("click",this._menuHideHandler))}},{key:"updateStatus",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return null===e?(this._$status.classList.add("brick__status--hidden"),this._$statusIcon.innerHTML=null,this._$statusMessage.innerText=null):(this._$status.className="brick__status brick__status--".concat(e),this._$statusIcon.innerHTML=Cu[e]||"",this._$statusMessage.innerText=t||"","forward"!==e&&"backward"!==e||(this._$status.classList.add("brick__status--flash"),this._$status.getBoundingClientRect(),this._$status.classList.remove("brick__status--flash"))),this}}]),t}(Gt),Lu=function(e){function t(){var e;return nt(this,t),(e=ht(this,ot(t).call(this)))._text="",e._disabled=!1,e._$textarea=null,e}return at(t,e),rt(t,[{key:"getText",value:function(){return this._text}},{key:"setText",value:function(e){return this._text!==e&&(this._text=e,null!==this._$textarea&&(this._$textarea.value=e,this.layoutTextarea())),this}},{key:"isDisabled",value:function(){return this._disabled}},{key:"setDisabled",value:function(e){return this._disabled=e,null!==this._$textarea&&(e?this._$textarea.disabled="disabled":this._$textarea.removeAttribute("disabled")),this}},{key:"render",value:function(){var e=ft(ot(t.prototype),"render",this).call(this);return e.classList.add("viewer-text"),e}},{key:"renderContent",value:function(){var e=this;this._$textarea=Gt.createElement("textarea",{className:"viewer-text__textarea",ariaLabel:"Content",spellcheck:!1,value:this._text,onInput:this.textareaValueDidChange.bind(this),onFocus:function(t){return e.focus()},onBlur:function(t){return e.blur()}}),this.isDisabled()&&(this._$textarea.disabled="disabled");var n=ft(ot(t.prototype),"renderContent",this).call(this);return n.appendChild(this._$textarea),n}},{key:"textareaValueDidChange",value:function(e){if(this.isDisabled())return e.preventDefault(),!1;var t=this._$textarea.value;this._text!==t&&(this._text=t,this.getModel().viewTextDidChange(this,this._text),this.layoutTextarea())}},{key:"layout",value:function(){return this.layoutTextarea(),ft(ot(t.prototype),"layout",this).call(this)}},{key:"layoutTextarea",value:function(){return this._$textarea.style.height="",this._$textarea.style.height="".concat(this._$textarea.scrollHeight,"px"),this}},{key:"update",value:function(){var e=this.getModel().getError();return null!==e?this.updateStatus("error","Binary content can't be interpreted as text. Try switching to the bytes view. "+e.message):this.updateStatus(null)}}]),t}(function(e){function t(){return nt(this,t),ht(this,ot(t).apply(this,arguments))}return at(t,e),rt(t,[{key:"render",value:function(){var e=ft(ot(t.prototype),"render",this).call(this);return e.classList.add("viewer"),e}},{key:"renderHeader",value:function(){var e=Gt.createElement("ul",{className:"brick__actions"},[Gt.createElement("li",{className:"brick__action-item"},[Gt.createElement("span",{className:"brick__action brick__action--active"},"View")])]),n=ft(ot(t.prototype),"renderHeader",this).call(this);return n.insertBefore(e,n.firstChild),n}}]),t}(Vu)),Tu=Ue.find,Pu=!0;"find"in[]&&Array(1).find((function(){Pu=!1})),Be({target:"Array",proto:!0,forced:Pu},{find:function(e){return Tu(this,e,arguments.length>1?arguments[1]:void 0)}}),jr("find");var Bu=[].reverse,Au=[1,2];Be({target:"Array",proto:!0,forced:String(Au)===String(Au.reverse())},{reverse:function(){return Oe(this)&&(this.length=this.length),Bu.call(this)}});var Mu=null,Fu=function(){function e(){nt(this,e),this._observerNames=[],this._observerCallbacks=[]}return rt(e,[{key:"trigger",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=0;-1!==(n=this._observerNames.indexOf(e,n));)this._observerCallbacks[n](e,t),n++;return this}},{key:"subscribe",value:function(e,t){return this._observerNames.push(e),this._observerCallbacks.push(t),this}},{key:"unsubscribe",value:function(e,t){for(var n=0;-1!==(n=this._observerNames.indexOf(e,n));)this._observerCallbacks[n]===t?(this._observerNames.splice(n,1),this._observerCallbacks.splice(n,1)):n++;return this}}],[{key:"getSharedInstance",value:function(){return null===Mu&&(Mu=new e),Mu}},{key:"trigger",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e.getSharedInstance().trigger(t,n)}}]),e}(),Ou=function(){function e(){nt(this,e),this._view=null,this._viewPrototype=Gt}return rt(e,[{key:"hasView",value:function(){return null!==this._view}},{key:"getView",value:function(){return null===this._view&&(this._view=new this._viewPrototype,this._view.setModel(this),this.didCreateView(this._view)),this._view}},{key:"updateView",value:function(){return this.hasView()&&this.getView().setNeedsUpdate(),this}},{key:"didCreateView",value:function(e){}}]),e}(),Du=function(e){function t(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return nt(this,t),(n=ht(this,ot(t).call(this)))._viewPrototype=xu,n._name=e,n._value=void 0!==i.value?i.value:null,n._delegate=i.delegate||null,n._randomizable=!1!==i.randomizable,n._valid=!0,n._message=null,n._messageKey=null,n._validateValueCallback=i.validateValue||null,n._filterValueCallback=i.filterValue||null,n._randomizeValueCallback=i.randomizeValue||null,n._label=i.label||lu.camelCaseToRegular(e),n._visible=!1!==i.visible,n._priority=void 0!==i.priority?i.priority:0,n._width=i.width||12,n}return at(t,e),rt(t,[{key:"getName",value:function(){return this._name}},{key:"getLabel",value:function(){return this._label}},{key:"isVisible",value:function(){return this._visible}},{key:"setVisible",value:function(e){return this._visible=e,this._delegate&&this._delegate.fieldNeedsLayout&&this._delegate.fieldNeedsLayout(this),this}},{key:"getPriority",value:function(){return this._priority}},{key:"setPriority",value:function(e){return this._priority=e,this._delegate&&this._delegate.fieldPriorityDidChange&&this._delegate.fieldPriorityDidChange(this,e),this._delegate&&this._delegate.fieldNeedsLayout&&this._delegate.fieldNeedsLayout(this),this}},{key:"getWidth",value:function(){return this._width}},{key:"setWidth",value:function(e){return this._width=e,this.updateView(),this._delegate&&this._delegate.fieldNeedsLayout&&this._delegate.fieldNeedsLayout(this),this}},{key:"getDelegate",value:function(){return this._delegate}},{key:"setDelegate",value:function(e){return this._delegate=e,this}},{key:"unsetDelegate",value:function(){return this._delegate=null,this}},{key:"isValid",value:function(){return this._valid}},{key:"getMessage",value:function(){return this._message}},{key:"getMessageKey",value:function(){return this._messageKey}},{key:"getValue",value:function(){return this._value}},{key:"setValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this.validateValue(e);if(this._valid=!0===n,this._valid?(this._message=null,this._messageKey=null):"object"===tt(n)?(this._message=n.message,this._messageKey=n.key):(this._message="The value is invalid",this._messageKey="invalid"),this.hasView()&&this.getView().setMessage(this.getMessage()),!this._valid)return this._value=e,this;var i=this.filterValue(e),r=i instanceof yu?i.isEqualTo(this._value):this._value===i;return r||(this._value=i,this.hasView()&&this.getView()!==t&&this.getView().updateValue(),this._delegate&&this._delegate!==t&&void 0!==this._delegate.fieldValueDidChange&&this.getDelegate().fieldValueDidChange(this,i)),this}},{key:"revalidateValue",value:function(){return this.setValue(this.getValue())}},{key:"validateValue",value:function(e){return null===this._validateValueCallback||this._validateValueCallback(e,this)}},{key:"filterValue",value:function(e){return null!==this._filterValueCallback?this._filterValueCallback(e,this):e}},{key:"isRandomizable",value:function(){return this._randomizable}},{key:"randomize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!this.isRandomizable())return this;var t=this.randomizeValue(e||new Sl);return null!==t?this.setValue(t):this}},{key:"randomizeValue",value:function(e){return this.randomizeValueWithCallback(e)}},{key:"randomizeValueWithCallback",value:function(e){return null!==this._randomizeValueCallback?this._randomizeValueCallback(e,this):null}},{key:"isCustomRandomizationSet",value:function(){return null!==this._randomizeValueCallback}},{key:"serializeValue",value:function(){if(!this.isValid())throw new Error("Invalid field values can't be serialized.");var e=this.getValue();if("boolean"!=typeof e&&"number"!=typeof e&&"string"!=typeof e&&null!==e)throw new Error("Field value serialization is not possible. Generic fields can only serialize boolean, number, string or null values safely. "+"Received value type '".concat(tt(e),"'."));return e}},{key:"extract",value:function(e){return this.setValue(this.extractValue(e)),this}},{key:"extractValue",value:function(e){return e}},{key:"didCreateView",value:function(e){this.getView().setMessage(this.getMessage())}}]),t}(Ou),Iu=function(e){function t(){var e;return nt(this,t),(e=ht(this,ot(t).call(this)))._$input=null,e}return at(t,e),rt(t,[{key:"updateValue",value:function(){return this._$input.checked=this.getModel().getValue(),this}},{key:"render",value:function(){var e=ft(ot(t.prototype),"render",this).call(this);return e.classList.add("field-boolean"),e}},{key:"renderField",value:function(){var e=this;this._$input=Gt.createElement("input",{className:"field-boolean__input",type:"checkbox",id:this.getId(),onChange:this.inputValueDidChange.bind(this),checked:this.getModel().getValue(),onFocus:function(t){return e.focus()},onBlur:function(t){return e.blur()}});var n=Gt.createElement("label",{className:"field-boolean__toggle",htmlFor:this.getId()},[Gt.createElement("span",{className:"field-boolean__choice"},this.getModel().getTrueLabel()),Gt.createElement("span",{className:"field-boolean__choice"},this.getModel().getFalseLabel())]),i=ft(ot(t.prototype),"renderField",this).call(this);return i.appendChild(this._$input),i.appendChild(n),i}},{key:"inputValueDidChange",value:function(e){this.getModel().viewValueDidChange(this,this._$input.checked)}}]),t}(xu),$u=[!0,1,"1","true"],Nu=[!1,0,"0","false"],Ru=function(e){function t(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return nt(this,t),(n=ht(this,ot(t).call(this,e,i)))._viewPrototype=Iu,n._trueLabel=i.trueLabel||"Yes",n._falseLabel=i.falseLabel||"No",n}return at(t,e),rt(t,[{key:"getTrueLabel",value:function(){return this._trueLabel}},{key:"getFalseLabel",value:function(){return this._falseLabel}},{key:"validateValue",value:function(e){return-1===$u.indexOf(e)&&-1===Nu.indexOf(e)?{key:"booleanInvalid",message:"The value is not a boolean"}:ft(ot(t.prototype),"validateValue",this).call(this,e)}},{key:"filterValue",value:function(e){return ft(ot(t.prototype),"filterValue",this).call(this,-1!==$u.indexOf(e))}},{key:"randomizeValue",value:function(e){var n=ft(ot(t.prototype),"randomizeValue",this).call(this,e);return null!==n?n:e.nextBoolean()}},{key:"viewValueDidChange",value:function(e,t){this.setValue(t,e)}}]),t}(Du),ju=function(e){function t(){var e;return nt(this,t),(e=ht(this,ot(t).call(this)))._$input=null,e}return at(t,e),rt(t,[{key:"updateValue",value:function(){var e=this.getModel().getValue(),t=du.hexStringFromBytes(e);return t=lu.chunk(t,2).join(" "),this._$input.value=t,this}},{key:"render",value:function(){var e=ft(ot(t.prototype),"render",this).call(this);return e.classList.add("field-byte"),e}},{key:"renderField",value:function(){var e=this;this._$input=Gt.createElement("input",{className:"field-byte__input",id:this.getId(),type:"text",spellcheck:!1,onInput:this.inputValueDidChange.bind(this),onFocus:function(t){return e.focus()},onBlur:function(t){return e.blur()}});var n=ft(ot(t.prototype),"renderField",this).call(this);return n.classList.remove("field__field"),n.classList.add("field-byte__field"),n.appendChild(this._$input),n}},{key:"inputValueDidChange",value:function(e){var t=lu.removeWhitespaces(this._$input.value);if(null===t.match(/^[0-9a-f]+$/gi))return this.setMessage("The value contains non-hexadecimal characters");this.clearMessage();var n=du.bytesFromHexString(t);this.getModel().viewValueDidChange(this,n)}}]),t}(xu),zu=function(e){function t(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return nt(this,t),(n=ht(this,ot(t).call(this,e,i)))._viewPrototype=ju,n._value=i.value||new Uint8Array,n._minSize=null,n._maxSize=null,n._randomizeSize=i.randomizeSize||null,n.setMinSize(i.minSize||null,!1),n.setMaxSize(i.maxSize||null,!1),n}return at(t,e),rt(t,[{key:"getMinSize",value:function(){return this._minSize}},{key:"setMinSize",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this._minSize===e?this:(this._minSize=null!==e?parseInt(e):null,t?this.revalidateValue():this)}},{key:"getMaxSize",value:function(){return this._maxSize}},{key:"setMaxSize",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this._maxSize===e?this:(this._maxSize=null!==e?parseInt(e):null,t?this.revalidateValue():this)}},{key:"validateValue",value:function(e){return e instanceof Uint8Array?null!==this._minSize&&e.length<this._minSize?{key:"byteSizeTooShort",message:"The value must be at least ".concat(this._minSize," ")+"".concat(1===this._minSize?"byte":"bytes"," long, ")+"found ".concat(e.length," ").concat(1===e.length?"byte":"bytes")}:null!==this._maxSize&&e.length>this._maxSize?{key:"byteSizeTooLong",message:"The value must not exceed ".concat(this._maxSize," ")+"".concat(1===this._maxSize?"byte":"bytes"," in length, ")+"found ".concat(e.length," ").concat(1===e.length?"byte":"bytes")}:ft(ot(t.prototype),"validateValue",this).call(this,e):{key:"byteUnexpectedType",message:"The value is expected to be of type Uint8Array"}}},{key:"randomizeValue",value:function(e){var n=ft(ot(t.prototype),"randomizeValue",this).call(this,e);return null!==n?n:null!==this._randomizeSize?e.nextBytes(this._randomizeSize):null!==this.getMinSize()?e.nextBytes(this.getMinSize()):this.isValid()?e.nextBytes(this.getValue().length):null}},{key:"serializeValue",value:function(){return du.base64StringFromBytes(this.getValue())}},{key:"extractValue",value:function(e){if("string"!=typeof e)throw new Error("Value of field '".concat(this.getName(),"' is expected to be a valid ")+"base64 string.");return du.bytesFromBase64String(e)}},{key:"viewValueDidChange",value:function(e,t){this.setValue(t,e)}}]),t}(Du),Hu=ve.includes;Be({target:"Array",proto:!0},{includes:function(e){return Hu(this,e,arguments.length>1?arguments[1]:void 0)}}),jr("includes");var Uu=function(e){if(Io(e))throw TypeError("The method doesn't accept regular expressions");return e},Wu=Ne("match");Be({target:"String",proto:!0,forced:!function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[Wu]=!1,"/./"[e](t)}catch(e){}}return!1}("includes")},{includes:function(e){return!!~String(b(this)).indexOf(Uu(e),arguments.length>1?arguments[1]:void 0)}});var qu=function(e){function t(){var e;return nt(this,t),(e=ht(this,ot(t).call(this)))._style="default",e._$select=null,e._$$radio=[],e}return at(t,e),rt(t,[{key:"getStyle",value:function(){return this._style}},{key:"setStyle",value:function(e){return this._style!==e&&(this._style=e,this.refresh()),this}},{key:"updateValue",value:function(){var e=this.getModel().getSelectedIndex();return"radio"===this.getStyle()?this._$$radio.forEach((function(t,n){t.checked=n===e})):this._$select.value=e,this}},{key:"render",value:function(){var e=ft(ot(t.prototype),"render",this).call(this);return e.className+=" field-enum field-enum--".concat(this.getStyle()),e}},{key:"renderField",value:function(){var e=this,n=this.getModel().getElementLabels(),i=this.getModel().getElementDescriptions(),r=ft(ot(t.prototype),"renderField",this).call(this);if(r.classList.remove("field__field"),r.classList.add("field-enum__field"),"radio"===this.getStyle()){this._$$radio=[];var a=Gt.createElement("div",{className:"field-enum__options",role:"radiogroup",id:this.getId()});r.appendChild(a),n.map((function(t,n){var i="".concat(e.getId(),"-").concat(n+1),r=Gt.createElement("input",{type:"radio",className:"field-enum__option-radio",id:i,onChange:e.valueDidChange.bind(e),name:e.getId()}),o=Gt.createElement("div",{className:"field-enum__option"},[r,Gt.createElement("label",{htmlFor:i,className:"field-enum__option-label"},t)]);e._$$radio.push(r),a.appendChild(o)}))}else{var o=n.map((function(e,t){return Gt.createElement("option",{value:t,title:i[t]||""},e)}));this._$select=Gt.createElement("select",{className:"field-enum__select",id:this.getId(),onChange:this.valueDidChange.bind(this),onFocus:function(t){return e.focus()},onBlur:function(t){return e.blur()}},o),r.appendChild(this._$select)}return r}},{key:"valueDidChange",value:function(e){var t="radio"===this.getStyle()?this._$$radio.findIndex((function(e){return e.checked})):parseInt(this._$select.value),n=this.getModel().getElementAt(t);this.getModel().viewValueDidChange(this,n)}}]),t}(xu),Gu=function(e){function t(e,n){var i;return nt(this,t),(i=ht(this,ot(t).call(this,e,n)))._viewPrototype=qu,i._elements=[],i._labels=[],i._descriptions=[],i._style=n.style||"default",i._blackChoiceList=n.blackChoiceList||[],i.setElements(n.elements,n.labels||null,n.descriptions||null,!1),i}return at(t,e),rt(t,[{key:"getElements",value:function(){return this._elements}},{key:"getElementLabels",value:function(){return this._labels}},{key:"getElementDescriptions",value:function(){return this._descriptions}},{key:"setElements",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(0===e.length)throw new Error("Array of elements can't be empty.");if(null!==t&&e.length!==t.length)throw new Error("Element and label arrays require the same length.");if(null!==n&&e.length!==n.length)throw new Error("Element and description arrays require the same length.");return this._elements=e,this._labels=null!==t?t:e,this._descriptions=null!==n?n:e.map((function(){return null})),null===this._value&&(this._value=this._elements[0]),this.hasView()&&this.getView().refresh(),i?this.revalidateValue():this}},{key:"getElementAt",value:function(e){return e<this._elements.length?this._elements[e]:null}},{key:"getSelectedIndex",value:function(){return this._elements.indexOf(this.getValue())}},{key:"setSelectedIndex",value:function(e){var t=this._elements[e];return this.setValue(t)}},{key:"getStyle",value:function(){return this._style}},{key:"setStyle",value:function(e){return this._style=e,this.hasView()&&this.getView().setStyle(e),this}},{key:"getBlackChoiceList",value:function(){return this._blackChoiceList}},{key:"setBlackChoiceList",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this._blackChoiceList=e,t?this.revalidateValue():this}},{key:"validateValue",value:function(e){return-1===this._elements.indexOf(e)?{key:"enumNotInHaystack",message:"The value must be occur in the list of elements"}:this._blackChoiceList.includes(e)?{key:this.name,message:"Chosen option is not compatible with other settings"}:ft(ot(t.prototype),"validateValue",this).call(this,e)}},{key:"randomizeValue",value:function(e){var n=ft(ot(t.prototype),"randomizeValue",this).call(this,e);return null!==n?n:e.nextChoice(this._elements)}},{key:"viewValueDidChange",value:function(e,t){this.setValue(t,e)}},{key:"didCreateView",value:function(e){ft(ot(t.prototype),"didCreateView",this).call(this,e),this.getView().setStyle(this.getStyle())}}]),t}(Du),Yu=Ml.trim,Ku=u.parseFloat,Ju=1/Ku(Ll+"-0")!=-1/0?function(e){var t=Yu(String(e)),n=Ku(t);return 0===n&&"-"==t.charAt(0)?-0:n}:Ku;Be({global:!0,forced:parseFloat!=Ju},{parseFloat:Ju});var Xu,Zu=function(e){function t(){var e;return nt(this,t),(e=ht(this,ot(t).call(this)))._$input=null,e._displayEnabled=!1,e._$display=null,e._$displayValue=null,e._$displayDescription=null,e}return at(t,e),rt(t,[{key:"updateValue",value:function(){var e=this.getModel().getValue();return this._$input.value=e,this._updateValueDisplay(),this}},{key:"_updateValueDisplay",value:function(){var e=this.getModel().getValue(),t=this.getModel().getValueDescription(),n=null!==t;return this._displayEnabled!==n&&(this._displayEnabled=n,n?this._$display.classList.add("field-number__display--enabled"):(this._$display.classList.remove("field-number__display--enabled"),this._$displayValue.innerText="",this._$displayDescription.innerText="")),n&&(this._$displayValue.innerText=e,this._$displayDescription.innerText=t),this}},{key:"render",value:function(){var e=ft(ot(t.prototype),"render",this).call(this);return e.classList.add("field-number"),e}},{key:"renderField",value:function(){var e=this;this._$input=Gt.createElement("input",{className:"field-number__input",id:this.getId(),type:"number",onInput:this.inputValueDidChange.bind(this),onFocus:function(t){return e.focus()},onBlur:function(t){return e.blur()}}),this._$displayValue=Gt.createElement("span",{className:"field-number__display-value"}),this._$displayDescription=Gt.createElement("span",{className:"field-number__display-description"}),this._$display=Gt.createElement("div",{className:"field-number__display"},[this._$displayValue,this._$displayDescription]);var n=Gt.createElement("button",{className:"field-number__btn-step-down",onClick:this.stepDownButtonDidClick.bind(this)},"Step Down"),i=Gt.createElement("div",{className:"field-number__value"},[this._$input,this._$display]),r=Gt.createElement("button",{className:"field-number__btn-step-up",onClick:this.stepUpButtonDidClick.bind(this)},"Step Up"),a=ft(ot(t.prototype),"renderField",this).call(this);return a.classList.remove("field__field"),a.classList.add("field-number__field"),a.appendChild(n),a.appendChild(i),a.appendChild(r),a}},{key:"inputValueDidChange",value:function(e){this.getModel().viewValueDidChange(this,this._$input.value),this._updateValueDisplay()}},{key:"stepDownButtonDidClick",value:function(e){return this.getModel().stepDown(),e.preventDefault(),!1}},{key:"stepUpButtonDidClick",value:function(e){return this.getModel().stepUp(),e.preventDefault(),!1}}]),t}(xu),Qu=function(e){function t(e,n){var i;return nt(this,t),(i=ht(this,ot(t).call(this,e,n)))._viewPrototype=Zu,i._integer=n.integer||!1,i._step=n.step||1,i._min=void 0!==n.min?n.min:null,i._max=void 0!==n.max?n.max:null,i._rotate=void 0!==n.rotate?n.rotate:null!==i._min&&null!==i._max,i._describeValueCallback=n.describeValue||null,i}return at(t,e),rt(t,[{key:"isInteger",value:function(){return this._integer}},{key:"setInteger",value:function(e){return this._integer=e,this.revalidateValue()}},{key:"getStep",value:function(){return this._step}},{key:"setStep",value:function(e){return this._step=e,this}},{key:"stepValue",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,n=this.getValue(),i=0,r=!1;!r&&i++<t&&(this._rotate||e>0||n!==this._min)&&(this._rotate||e<0||n!==this._max);)n+=e,this._rotate&&n>this._max&&this._rotate?n=this._min:this._rotate&&n<this._min&&this._rotate&&(n=this._max+e),r=!0===this.validateValue(n);return r?n:null}},{key:"stepUp",value:function(){var e=this.stepValue(this._step);return null!==e?this.setValue(e):this}},{key:"stepDown",value:function(){var e=this.stepValue(-this._step);return null!==e?this.setValue(e):this}},{key:"getMin",value:function(){return this._min}},{key:"setMin",value:function(e){return this._min=e,this.revalidateValue()}},{key:"getMax",value:function(){return this._max}},{key:"setMax",value:function(e){return this._max=e,this.revalidateValue()}},{key:"isRotate",value:function(){return this._rotate}},{key:"setRotate",value:function(e){return this._rotate=e&&null!==this._min&&null!==this._max,this}},{key:"getValueDescription",value:function(){return this.isValid()&&null!==this._describeValueCallback?this._describeValueCallback(this.getValue(),this):null}},{key:"setNeedsValueDescriptionUpdate",value:function(){this.hasView()&&this.getView().updateValue()}},{key:"validateValue",value:function(e){var n=this.filterValue(e);return isNaN(n)||!isFinite(n)?{key:"numberNotNumeric",message:"The value is not numeric"}:null!==this._min&&n<this._min?{key:"numberTooSmall",message:"The value must be greater than or equal to ".concat(this._min)}:null!==this._max&&n>=this._max?{key:"numberTooLarge",message:"The value must be less than ".concat(this._max)}:ft(ot(t.prototype),"validateValue",this).call(this,n)}},{key:"filterValue",value:function(e){return e=this.isInteger()?parseInt(e):parseFloat(e),ft(ot(t.prototype),"filterValue",this).call(this,e)}},{key:"randomizeValue",value:function(e){var n=ft(ot(t.prototype),"randomizeValue",this).call(this,e);return null!==n?n:null!==this.getMin()&&null!==this.getMax()?this.isInteger()?e.nextInteger(this.getMin(),Math.ceil(this.getMax())-1):e.nextFloat(this.getMin(),this.getMax()):null}},{key:"viewValueDidChange",value:function(e,t){this.setValue(t,e)}}]),t}(Du),ec=function(e){function t(){var e;return nt(this,t),(e=ht(this,ot(t).call(this)))._$input=null,e}return at(t,e),rt(t,[{key:"updateValue",value:function(){return this._$input.value=this.getModel().getValue().getString(),this}},{key:"render",value:function(){var e=ft(ot(t.prototype),"render",this).call(this);return e.classList.add("field-text"),e}},{key:"renderField",value:function(){var e=this;this._$input=Gt.createElement("input",{className:"field-text__input",id:this.getId(),type:"text",spellcheck:!1,onInput:this.inputValueDidChange.bind(this),onFocus:function(t){return e.focus()},onBlur:function(t){return e.blur()}});var n=ft(ot(t.prototype),"renderField",this).call(this);return n.classList.remove("field__field"),n.classList.add("field-text__field"),n.appendChild(this._$input),n}},{key:"inputValueDidChange",value:function(e){this.getModel().viewValueDidChange(this,this._$input.value)}}]),t}(xu),tc=function(e){function t(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return nt(this,t),(n=ht(this,ot(t).call(this,e,i)))._viewPrototype=ec,n._value=yu.wrap(i.value||null),n._minLength=null,n._maxLength=null,n._whitelistChars=null,n._blacklistChars=null,n._uniqueChars=!1,n._caseSensitivity=null,n.setMinLength(void 0!==i.minLength?i.minLength:null,!1),n.setMaxLength(void 0!==i.maxLength?i.maxLength:null,!1),n.setWhitelistChars(i.whitelistChars||null,!1),n.setBlacklistChars(i.blacklistChars||null,!1),n.setUniqueChars(i.uniqueChars||!1,!1),n.setCaseSensitivity(!1!==i.caseSensitivity,!1),n}return at(t,e),rt(t,[{key:"getMinLength",value:function(){return this._minLength}},{key:"setMinLength",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this._minLength===e?this:(this._minLength=null!==e?parseInt(e):null,t?this.revalidateValue():this)}},{key:"getMaxLength",value:function(){return this._maxLength}},{key:"setMaxLength",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this._maxLength===e?this:(this._maxLength=null!==e?parseInt(e):null,t?this.revalidateValue():this)}},{key:"getWhitelistChars",value:function(){return this._whitelistChars}},{key:"setWhitelistChars",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this._whitelistChars=null!==e?yu.wrap(e).getCodePoints():null,t?this.revalidateValue():this}},{key:"getBlacklistChars",value:function(){return this._blacklistChars}},{key:"setBlacklistChars",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this._blacklistChars=null!==e?yu.wrap(e).getCodePoints():null,t?this.revalidateValue():this}},{key:"isUniqueChars",value:function(){return this._uniqueChars}},{key:"setUniqueChars",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this._uniqueChars===e?this:(this._uniqueChars=e,t?this.revalidateValue():this)}},{key:"isCaseSensitive",value:function(){return this._caseSensitivity}},{key:"setCaseSensitivity",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this._caseSensitivity===e?this:(this._caseSensitivity=e,t?this.revalidateValue():this)}},{key:"validateValue",value:function(e){if("function"!=typeof e.toString)return{key:"textInvalidString",message:"The value can't be casted to a string"};var n=this.filterValue(e);if(null!==this._minLength&&n.getLength()<this._minLength)return{key:"textLengthTooShort",message:"The value must be at least ".concat(this._minLength," ")+"".concat(1===this._minLength?"character":"characters"," long")};if(null!==this._maxLength&&n.getLength()>this._maxLength)return{key:"textLengthTooLong",message:"The value must not exceed ".concat(this._maxLength," ")+"".concat(1===this._maxLength?"character":"characters"," in length")};if(this._uniqueChars&&!Cl.isUnique(n.getCodePoints()))return{key:"textCharactersNotUnique",message:"The value must not contain duplicate characters"};if(null!==this._whitelistChars||null!==this._blacklistChars){for(var i,r=this._whitelistChars,a=this._blacklistChars,o=[],s=0;s<n.getLength();s++)i=n.getCodePointAt(s),(null!==r&&-1===r.indexOf(i)||null!==a&&-1!==a.indexOf(i))&&o.push(n.getCharAt(s));if(o.length>0)return o=Cl.unique(o),{key:"textForbiddenCharacter",message:"The value contains forbidden characters: "+"'".concat(o.join(""),"'")}}return ft(ot(t.prototype),"validateValue",this).call(this,n)}},{key:"filterValue",value:function(e){return e=yu.wrap(e),!1===this._caseSensitivity&&(e=e.toLowerCase()),yu.wrap(ft(ot(t.prototype),"filterValue",this).call(this,e))}},{key:"randomizeValue",value:function(e){var n=ft(ot(t.prototype),"randomizeValue",this).call(this,e);if(null!==n)return n;if(this.isValid()){if(this.isUniqueChars()){var i=this.getValue().getCodePoints();return yu.wrap(Cl.shuffle(i,e))}if(null!==this.getWhitelistChars()){for(var r=this.getValue().getLength(),a=[],o=0;o<r;o++)a.push(e.nextChoice(this.getWhitelistChars()));return yu.wrap(a)}}return null}},{key:"serializeValue",value:function(){return this.getValue().getString()}},{key:"extractValue",value:function(e){if("string"!=typeof e)throw new Error("Value of field '".concat(this.getName(),"' is expected to be a string."));return yu.wrap(e)}},{key:"viewValueDidChange",value:function(e,t){this.setValue(t,e)}}]),t}(Du),nc=null,ic=function(e){function t(){var e;nt(this,t),e=ht(this,ot(t).call(this));var n={boolean:Ru,bytes:zu,enum:Gu,number:Qu,text:tc};for(var i in n)e.register(i,n[i]);return e}return at(t,e),rt(t,[{key:"create",value:function(e){if(!e.name)throw new Error("Field specification requires a 'name' field.");if(!e.type)throw new Error("Field specification requires a 'type' field.");if(!this.exists(e.type))throw new Error("Unknown Field type '".concat(e.type,"'."));return ft(ot(t.prototype),"create",this).call(this,e.type,e.name,e)}}],[{key:"getInstance",value:function(){return null===nc&&(nc=new t),nc}}]),t}(en),rc=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return nt(this,t),(e=ht(this,ot(t).call(this)))._viewPrototype=Eu,e._delegate=null,e._fieldFactory=i,e._fields=[],e.addFields(n),e}return at(t,e),rt(t,[{key:"getFields",value:function(){return this._fields.slice()}},{key:"getInvalidFields",value:function(){return this._fields.filter((function(e){return!e.isValid()}))}},{key:"getVisibleFields",value:function(){return this._fields.filter((function(e){return e.isVisible()}))}},{key:"addFields",value:function(e){return e.forEach(this.addField.bind(this)),this}},{key:"removeFields",value:function(e){return e.forEach(this.removeField.bind(this)),this}},{key:"getField",value:function(e){return this._fields.find((function(t){return t.getName()===e}))||null}},{key:"addField",value:function(e){var t=e;if(!(e instanceof Du)){var n=e;void 0===n.priority&&(n.priority=this._calculateDefaultPriority()),t=this.getFieldFactory().create(n)}if(this.getField(t.getName()))throw new Error("Name '".concat(t.getName(),"' is already assigned to a field."));return this._fields.push(t),t.setDelegate(this),this._sortFields(),t.isVisible()&&this.hasView()&&this.getView().addSubview(t.getView()),this}},{key:"removeField",value:function(e){var t=e;if(!(e instanceof Du)){var n=e;void 0===n.priority&&(n.priority=this._calculateDefaultPriority()),t=this.getFieldFactory().create(n)}if(!this.getField(t.getName()))throw new Error("Field '".concat(t.getName(),"' is not assigned to the field."));var i=this._fields.indexOf(t);return this._fields.splice(i,1),t.unsetDelegate(),this._sortFields(),t.isVisible()&&this.hasView()&&this.getView().removeSubview(t.getView()),this}},{key:"getFieldValue",value:function(e){var t=this.getField(e);if(null===t)throw new Error("There is no field assigned to the name '".concat(e,"'."));return t.getValue()}},{key:"setFieldValue",value:function(e,t){var n=this.getField(e);if(null===n)throw new Error("There is no field assigned to the name '".concat(e,"'."));return n.setValue(t),this}},{key:"getFieldValues",value:function(){var e={};return this.getVisibleFields().forEach((function(t){e[t.getName()]=t.getValue()})),e}},{key:"setFieldValues",value:function(e){for(var t in e)this.setFieldValue(t,e[t]);return this}},{key:"getFieldFactory",value:function(){return null===this._fieldFactory&&(this._fieldFactory=ic.getInstance()),this._fieldFactory}},{key:"setFieldFactory",value:function(e){return this._fieldFactory=e,this}},{key:"isValid",value:function(){return 0===this.getInvalidFields().length}},{key:"isRandomizable",value:function(){return void 0!==this._fields.find((function(e){return e.isRandomizable()}))}},{key:"randomize",value:function(){return this._fields.filter((function(e){return e.isVisible()&&e.isRandomizable()})).forEach((function(e){return e.randomize()})),this}},{key:"getDelegate",value:function(){return this._delegate}},{key:"setDelegate",value:function(e){return this._delegate=e,this}},{key:"serializeValues",value:function(){var e={};return this.getVisibleFields().forEach((function(t){e[t.getName()]=t.serializeValue()})),e}},{key:"extract",value:function(e){return this.setFieldValues(this.extractValues(e))}},{key:"extractValues",value:function(e){if("object"!==tt(e))throw new Error("Serialized form values is expected to be an object mapping field names to their respective serialized values. "+"Received value type '".concat(tt(e),"'."));var t={};for(var n in e){if("string"!=typeof n)throw new Error("Field name is expected to be a string. "+"Received type '".concat(tt(n),"'."));var i=this.getField(n);if(null===i)throw new Error("There is no field assigned to the name '".concat(n,"'."));t[n]=i.extractValue(e[n])}return t}},{key:"_calculateDefaultPriority",value:function(){if(0===this._fields.length)return 0;for(var e=this._fields[0].getPriority(),t=1;t<this._fields.length;t++)e=Math.min(e,this._fields[t].getPriority());return e-1}},{key:"_sortFields",value:function(){this._fields.sort((function(e,t){return t.getPriority()-e.getPriority()}))}},{key:"didCreateView",value:function(e){var t=this;this._fields.forEach((function(e){return t.fieldNeedsLayout(e)}))}},{key:"fieldPriorityDidChange",value:function(e,t){this._sortFields()}},{key:"fieldNeedsLayout",value:function(e){this.hasView()&&(e.getView().removeFromSuperview(),e.isVisible()&&this.getView().addSubview(e.getView()))}},{key:"fieldValueDidChange",value:function(e,t){this._delegate&&this._delegate.formValueDidChange&&this.getDelegate().formValueDidChange(this,e,t)}}]),t}(Ou),ac=function(e){function t(){var e;return nt(this,t),(e=ht(this,ot(t).call(this)))._pipe=null,e._viewPrototype=Vu,e._settingsForm=new rc,e._settingsForm.setDelegate(ct(e)),e._title=null,e._hidden=!1,e}return at(t,e),rt(t,null,[{key:"getMeta",value:function(){throw new Error("Brick static method 'getMeta' has not been overridden.")}}]),rt(t,[{key:"getPipe",value:function(){return this._pipe}},{key:"hasPipe",value:function(){return null!==this._pipe}},{key:"setPipe",value:function(e){return this._pipe=e,this}},{key:"getMeta",value:function(){return this.constructor.getMeta()}},{key:"getName",value:function(){return this.getMeta().name}},{key:"getTitle",value:function(){return null===this._title?this.getMeta().title:this._title}},{key:"setTitle",value:function(e){return this._title=e&&e!==this.getMeta().title?e:null,this}},{key:"isHidden",value:function(){return this._hidden}},{key:"setHidden",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._hidden!==e&&(this._hidden=e,this.hasPipe()&&this.getPipe().brickVisibilityDidChange(this,e)),this}},{key:"getSettingsForm",value:function(){return this._settingsForm}},{key:"getSettings",value:function(){return this._settingsForm.getFields()}},{key:"addSettings",value:function(e){return this._settingsForm.addFields(e),this}},{key:"removeSettings",value:function(e){return this._settingsForm.removeFields(e),this}},{key:"getSetting",value:function(e){return this._settingsForm.getField(e)}},{key:"addSetting",value:function(e){return this._settingsForm.addField(e),this}},{key:"removeSetting",value:function(e){return this._settingsForm.removeField(e),this}},{key:"getSettingValue",value:function(e){return this._settingsForm.getFieldValue(e)}},{key:"setSettingValue",value:function(e,t){return this._settingsForm.setFieldValue(e,t),this}},{key:"getSettingValues",value:function(){return this._settingsForm.getFieldValues()}},{key:"setSettingValues",value:function(e){return this._settingsForm.setFieldValues(e),this}},{key:"isValid",value:function(){return this._settingsForm.isValid()}},{key:"isSettingValid",value:function(){for(var e=this,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return void 0===n.find((function(t){return!e.getSetting(t).isValid()}))}},{key:"isRandomizable",value:function(){return this._settingsForm.isRandomizable()}},{key:"randomize",value:function(){return this._settingsForm.randomize(),this}},{key:"formValueDidChange",value:function(e,t,n){e===this._settingsForm&&(this.settingValueDidChange(t,n),this.hasPipe()&&this.getPipe().brickSettingDidChange(this))}},{key:"settingValueDidChange",value:function(e,t){}},{key:"didCreateView",value:function(e){e.addSubview(this._settingsForm.getView())}},{key:"viewMenuItemDidClick",value:function(e,t){switch(Fu.trigger("brickMenuItemClick",{brick:this,menuItem:t}),t){case"remove":this.getPipe().removeBrick(this);break;case"hide":this.setHidden(!0);break;case"duplicate":this.isValid()&&this.getPipe().duplicateBrick(this);break;case"randomize":this.randomize()}}},{key:"viewReplaceButtonDidClick",value:function(e){this.hasPipe()&&(Fu.trigger("brickReplaceButtonClick",{brick:this}),this.getPipe().brickReplaceButtonDidClick(this))}},{key:"serialize",value:function(){var e={};e.name=this.getName(),null!==this._title&&(e.title=this._title),this.isHidden()&&(e.hidden=!0);var t=this._settingsForm.serializeValues();return Object.keys(t).length>0&&(e.settings=t),e}},{key:"copy",value:function(){if(!this.isValid())throw new Error("Invalid bricks can't be copied.");var e=new this.constructor;return e.setTitle(this.getTitle()),e.setHidden(this.isHidden()),e.setSettingValues(this.getSettingValues()),e}}],[{key:"extract",value:function(e,t){if("string"!=typeof e.name)throw new Error("Brick property 'name' is expected to be of type 'string'");var n=e.name;if(!t.exists(n))throw new Error("Brick property 'name' refers to an unknown brick '".concat(n,"'"));var i=t.create(n);if(void 0!==e.title){if("string"!=typeof e.title)throw new Error("Optional brick property 'title' is expected to be of type 'string'");i.setTitle(e.title)}if(void 0!==e.hidden){if("boolean"!=typeof e.hidden)throw new Error("Optional brick property 'hidden' is expected to be of type 'boolean'");i.setHidden(e.hidden)}if(void 0!==e.reverse){if("function"!=typeof i.setReverse)throw new Error("Optional brick property 'reverse' can only be set on encoder bricks");if("boolean"!=typeof e.reverse)throw new Error("Optional brick property 'reverse' is expected to be of type 'boolean'");i.setReverse(e.reverse)}return void 0!==e.settings&&i.getSettingsForm().extract(e.settings),i}}]),t}(Ou),oc=function(e){function t(){var e;return nt(this,t),(e=ht(this,ot(t).call(this)))._queuedContent=null,e._error=null,e}return at(t,e),rt(t,[{key:"view",value:function(e){var t;return regeneratorRuntime.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,!((t=this.getSettingsForm().getInvalidFields()).length>0)){n.next=4;break}throw new cu("Can't view content with invalid settings: "+t.map((function(e){return e.getLabel()})).join(", "));case 4:if(this.hasView()){n.next=7;break}return this._queuedContent=e,n.abrupt("return");case 7:return n.next=9,regeneratorRuntime.awrap(this.willView(e));case 9:return e=n.sent,n.next=12,regeneratorRuntime.awrap(this.performView(e));case 12:return n.next=14,regeneratorRuntime.awrap(this.didView(e));case 14:null!==this._error&&(this._error=null,this.updateView()),n.next=22;break;case 17:throw n.prev=17,n.t0=n.catch(0),this._error=n.t0,this.updateView(),n.t0;case 22:case"end":return n.stop()}}),null,this,[[0,17]])}},{key:"willView",value:function(e){return regeneratorRuntime.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e);case 1:case"end":return t.stop()}}))}},{key:"performView",value:function(e){return regeneratorRuntime.async((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}))}},{key:"didView",value:function(e){return regeneratorRuntime.async((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}))}},{key:"dare",value:function(e){var t,n=arguments;return regeneratorRuntime.async((function(i){for(;;)switch(i.prev=i.next){case 0:return t=n.length>1&&void 0!==n[1]&&n[1],i.prev=1,i.next=4,regeneratorRuntime.awrap(e());case 4:null!==this._error&&(this._error=null,this.updateView()),i.next=13;break;case 7:if(i.prev=7,i.t0=i.catch(1),this._error=i.t0,this.updateView(),!t&&i.t0 instanceof cu){i.next=13;break}throw i.t0;case 13:return i.abrupt("return",this);case 14:case"end":return i.stop()}}),null,this,[[1,7]])}},{key:"getError",value:function(){return this._error}},{key:"didCreateView",value:function(e){ft(ot(t.prototype),"didCreateView",this).call(this,e),null!==this._queuedContent&&(this.view(this._queuedContent),this._queuedContent=null)}},{key:"contentDidChange",value:function(e){this.hasPipe()&&this.getPipe().viewerContentDidChange(this,e)}}]),t}(ac),sc={name:"text",title:"Text",category:"View",type:"viewer"},lc=function(e){function t(){var e;return nt(this,t),(e=ht(this,ot(t).call(this)))._viewPrototype=Lu,e}return at(t,e),rt(t,null,[{key:"getMeta",value:function(){return sc}}]),rt(t,[{key:"performView",value:function(e){return regeneratorRuntime.async((function(t){for(;;)switch(t.prev=t.next){case 0:this.getView().setText(e.getString());case 1:case"end":return t.stop()}}),null,this)}},{key:"viewTextDidChange",value:function(e,t){var n=this;this.dare((function(){n.contentDidChange(yu.wrap(t))}))}}]),t}(oc),uc=function(e){function t(){var e;return nt(this,t),(e=ht(this,ot(t).call(this)))._$encodeAction=null,e._$decodeAction=null,e}return at(t,e),rt(t,[{key:"render",value:function(){var e=ft(ot(t.prototype),"render",this).call(this);return e.classList.add("encoder"),e}},{key:"renderHeader",value:function(){this._$encodeAction=Gt.createElement("a",{className:"brick__action brick__action--active",href:"#",onClick:this.actionDidClick.bind(this,"encode"),draggable:!1},"Encode"),this._$decodeAction=Gt.createElement("a",{className:"brick__action",href:"#",onClick:this.actionDidClick.bind(this,"decode"),draggable:!1},"Decode");var e=Gt.createElement("ul",{className:"brick__actions"},[Gt.createElement("li",{className:"brick__action-item"},this._$encodeAction),Gt.createElement("li",{className:"brick__action-item"},this._$decodeAction)]),n=ft(ot(t.prototype),"renderHeader",this).call(this);return n.insertBefore(e,n.firstChild),n}},{key:"renderContent",value:function(){return null}},{key:"actionDidClick",value:function(e,t){t.preventDefault();var n="decode"===e;this.getModel().isReverse()!==n&&this.getModel().viewDidReverse(this)}},{key:"update",value:function(){var e=this.getModel().isReverse();e?(this._$encodeAction.classList.remove("brick__action--active"),this._$decodeAction&&this._$decodeAction.classList.add("brick__action--active")):(this._$encodeAction.classList.add("brick__action--active"),this._$decodeAction&&this._$decodeAction.classList.remove("brick__action--active"));var t=this.getModel().getLastError(),n=this.getModel().getLastTranslationMeta();if(null!==n){var i=n.isEncode?"forward":"backward",r="".concat(n.isEncode!==e?"Encoded":"Decoded"," ");return null!==n.charCount?r+="".concat(n.charCount," ")+"".concat(1===n.charCount?"char":"chars"):r+="".concat(n.byteCount," ")+"".concat(1===n.byteCount?"byte":"bytes"),this.updateStatus(i,r)}return null!==t?this.updateStatus("error",t.message):this}}]),t}(Vu),cc=function(){function e(){nt(this,e)}return rt(e,null,[{key:"mod",value:function(e,t){var n=e%(t=t<0?-t:t);return n<0?n+t:n}},{key:"div",value:function(e,t){return Math.floor(e/t)}},{key:"isCoprime",value:function(t,n){return 1===e.gcd(t,n)}},{key:"gcd",value:function(e,t){for(;0!==t;){var n=e%t;e=t,t=n}return e}},{key:"xgcd",value:function(t,n){if(0===n)return[1,0,t];var i=dt(e.xgcd(n,t%n),3),r=i[0],a=i[1],o=i[2];return[a,r-a*e.div(t,n),o]}},{key:"time",value:function(){return"undefined"!=typeof window&&void 0!==window.performance?window.performance.now():"undefined"!=typeof process?process.hrtime()[1]/1e6:parseFloat((new Date).getTime())}}]),e}(),hc=function(e){function t(){var e;return nt(this,t),(e=ht(this,ot(t).call(this)))._viewPrototype=uc,e._reverse=!1,e._encodeOnly=!1,e._lastError=null,e._lastTranslationMeta=null,e}return at(t,e),rt(t,[{key:"encode",value:function(e){return regeneratorRuntime.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.translate(e,!0));case 1:case"end":return t.stop()}}),null,this)}},{key:"decode",value:function(e){return regeneratorRuntime.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.translate(e,!1));case 1:case"end":return t.stop()}}),null,this)}},{key:"translate",value:function(e,t){var n,i;return regeneratorRuntime.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(r.prev=0,n=cc.time(),t!==this._reverse||!this.isEncodeOnly()){r.next=4;break}throw new cu("Decoding is not defined in brick '".concat(this.getMeta().title,"'"));case 4:if(!((i=this.getSettingsForm().getInvalidFields()).length>0)){r.next=7;break}throw new cu("Can't ".concat(t?"encode":"decode"," with invalid settings: ")+i.map((function(e){return e.getLabel()+" ("+(e.getMessage()||"none")+")"})).join(", "));case 7:if(e=yu.wrap(e),t===this._reverse){r.next=26;break}return r.t0=yu,r.next=12,regeneratorRuntime.awrap(this.willEncode(e));case 12:return r.t1=r.sent,e=r.t0.wrap.call(r.t0,r.t1),r.t2=yu,r.next=17,regeneratorRuntime.awrap(this.performEncode(e));case 17:return r.t3=r.sent,e=r.t2.wrap.call(r.t2,r.t3),r.t4=yu,r.next=22,regeneratorRuntime.awrap(this.didEncode(e));case 22:r.t5=r.sent,e=r.t4.wrap.call(r.t4,r.t5),r.next=41;break;case 26:return r.t6=yu,r.next=29,regeneratorRuntime.awrap(this.willDecode(e));case 29:return r.t7=r.sent,e=r.t6.wrap.call(r.t6,r.t7),r.t8=yu,r.next=34,regeneratorRuntime.awrap(this.performDecode(e));case 34:return r.t9=r.sent,e=r.t8.wrap.call(r.t8,r.t9),r.t10=yu,r.next=39,regeneratorRuntime.awrap(this.didDecode(e));case 39:r.t11=r.sent,e=r.t10.wrap.call(r.t10,r.t11);case 41:return this._lastError=null,this._lastTranslationMeta={isEncode:t,duration:cc.time()-n,byteCount:e.needsByteEncoding()?null:e.getSize(),charCount:e.needsTextEncoding()?null:e.getLength()},this.updateView(),r.abrupt("return",e);case 47:throw r.prev=47,r.t12=r.catch(0),this._lastError=r.t12,this._lastTranslationMeta=null,this.updateView(),r.t12;case 53:case"end":return r.stop()}}),null,this,[[0,47]])}},{key:"isReverse",value:function(){return this._reverse}},{key:"setReverse",value:function(e){return this._reverse!==e&&(this._reverse=e,this.updateView(),this.hasPipe()&&this.getPipe().encoderDidReverse(this,e)),this}},{key:"isEncodeOnly",value:function(){return this._encodeOnly}},{key:"setEncodeOnly",value:function(e){return this._encodeOnly=e,this}},{key:"getLastError",value:function(){return this._lastError}},{key:"getLastTranslationMeta",value:function(){return this._lastTranslationMeta}},{key:"serialize",value:function(){var e=ft(ot(t.prototype),"serialize",this).call(this);return this.isReverse()&&(e.reverse=!0),e}},{key:"copy",value:function(){var e=ft(ot(t.prototype),"copy",this).call(this);return e.setReverse(this.isReverse()),e}},{key:"willEncode",value:function(e){return this.willTranslate(e,!0)}},{key:"performEncode",value:function(e){return this.performTranslate(e,!0)}},{key:"didEncode",value:function(e){return this.didTranslate(e,!0)}},{key:"willDecode",value:function(e){return this.willTranslate(e,!1)}},{key:"performDecode",value:function(e){return this.performTranslate(e,!1)}},{key:"didDecode",value:function(e){return this.didTranslate(e,!1)}},{key:"willTranslate",value:function(e,t){return e}},{key:"performTranslate",value:function(e,t){return e}},{key:"didTranslate",value:function(e,t){return e}},{key:"viewDidReverse",value:function(e){this.setReverse(!this.isReverse()),Fu.trigger("encoderReverse",{encoder:this,reverse:this.isReverse()})}}]),t}(ac),fc={name:"rsa-cipher",title:"RSA Cipher",category:"Ciphers",type:"encoder"},dc="abcdefghijklmnopqrstuvwxyz",vc={name:"key",type:"number",label:"e",value:10,integer:!0},pc={name:"key",type:"number",label:"d",value:10,integer:!0},gc=function(e){function t(){var e;return nt(this,t),(e=ht(this,ot(t).call(this))).addSettings([{name:"password",label:"First 3 letters decrypted",type:"text",value:"fuc",minLength:3,caseSensitivity:!1,randomizable:!1},{name:"language",label:"Ciphertext Alphabet",type:"enum",value:"english",elements:["english","italian","other"],labels:["English","Italian","Other"],blackChoiceList:[],width:8,randomizable:!1},{name:"alphabet",type:"text",value:dc,uniqueChars:!0,minLength:2,caseSensitivity:!1,randomizable:!1},{name:"n",type:"number",label:"n",value:10,integer:!0}].concat(vc)),e}return at(t,e),rt(t,null,[{key:"getMeta",value:function(){return fc}}]),rt(t,[{key:"performTranslate",value:function(e,t,n){var r=this.getSetting("key");console.log(r),console.log(r._label),!t&"e"===r._label?(this.removeSetting(r),this.addSetting(pc)):t&"d"===r._label&&(this.removeSetting(r),this.addSetting(vc));var a=this.getSettingValue("password").toString(),o=forge.md.sha256.create();if(o.start(),o.update(a,"ascii"),"f16b49f38336a58eba5a466ed614fcaef7ec13b7a107c6bdc170d63993239dc5"!=o.digest().toHex())throw new Error("Sorry, my first 3 letters? Mr. Gratis is dead ");var s=this.getSettingValue("alphabet").getString(),l=e.getString().toLowerCase(),u="",c=this.getSettingValue("key"),h=this.getSettingValue("n");if(h>s.length)throw new Error("n must be smaller or equal to alphabet length.");for(i=0;i<l.length;i++)cipNum=s.indexOf(l[i]),-1!==cipNum&&(plainNum=cc.mod(Math.pow(cipNum,c),h),u=u.concat(s[plainNum]));return resultChain=new yu(u),resultChain.getCodePoints()}},{key:"settingValueDidChange",value:function(e,t){switch(e.getName()){case"alphabet":t!=dc&&"abcdefghilmnopqrstuvz"!=t&&this.setSettingValue("language","other"),n=this.getSettingValue("n"),this.setSettingValue("n",n);break;case"language":"english"==t?this.setSettingValue("alphabet",dc):"italian"==t&&this.setSettingValue("alphabet","abcdefghilmnopqrstuvz")}}}]),t}(hc),yc=null,_c=function(e){function t(){var e;return nt(this,t),e=ht(this,ot(t).call(this)),[lc,gc].forEach(e.register.bind(ct(e))),e}return at(t,e),rt(t,[{key:"register",value:function(e){var n=e.getMeta().name;return ft(ot(t.prototype),"register",this).call(this,n,e)}},{key:"getMeta",value:function(e){return this.getInvokable(e).getMeta()}},{key:"getLibrary",value:function(){var e=this;return this.getIdentifiers().map((function(t){return e.getMeta(t)}))}}],[{key:"getInstance",value:function(){return null===yc&&(yc=new t),yc}}]),t}(en),mc=r((function(e,n){var i=t&&t.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var i=Array(e),r=0;for(t=0;t<n;t++)for(var a=arguments[t],o=0,s=a.length;o<s;o++,r++)i[r]=a[o];return i};Object.defineProperty(n,"__esModule",{value:!0});var r=function(e,t,n){this.name=e,this.version=t,this.os=n};n.BrowserInfo=r;var a=function(e){this.version=e,this.name="node",this.os=process.platform};n.NodeInfo=a;var o=function(){this.bot=!0,this.name="bot",this.version=null,this.os=null};n.BotInfo=o;var s=3,l=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["vivaldi",/Vivaldi\/([0-9\.]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/Edg\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FBAV\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["searchbot",/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/]],u=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/],["Search Bot",/(nuhk)|(Googlebot)|(Yammybot)|(Openbot)|(Slurp)|(MSNBot)|(Ask Jeeves\/Teoma)|(ia_archiver)/]];function c(e){var t=""!==e&&l.reduce((function(t,n){var i=n[0],r=n[1];if(t)return t;var a=r.exec(e);return!!a&&[i,a]}),!1);if(!t)return null;var n=t[0],a=t[1];if("searchbot"===n)return new o;var u=a[1]&&a[1].split(/[._]/).slice(0,3);return u?u.length<s&&(u=i(u,function(e){for(var t=[],n=0;n<e;n++)t.push("0");return t}(s-u.length))):u=[],new r(n,u.join("."),h(e))}function h(e){for(var t=0,n=u.length;t<n;t++){var i=u[t],r=i[0];if(i[1].test(e))return r}return null}function f(){return"undefined"!=typeof process&&process.version?new a(process.version.slice(1)):null}n.detect=function(e){return e?c(e):"undefined"!=typeof navigator?c(navigator.userAgent):f()},n.parseUserAgent=c,n.detectOS=h,n.getNodeVersion=f}));(Xu=mc)&&Xu.__esModule&&Object.prototype.hasOwnProperty.call(Xu,"default")&&Xu.default;mc.BrowserInfo,mc.NodeInfo,mc.BotInfo;var bc=mc.detect,kc=(mc.parseUserAgent,mc.detectOS,mc.getNodeVersion,null),wc=function(){function e(){nt(this,e)}return rt(e,null,[{key:"identify",value:function(){return null===kc&&(kc=bc()||!1),kc}},{key:"match",value:function(){var t=this,n=e.identify();if(!1===n)return!1;for(var i=/([a-zA-Z0-9-]+)(?:([<>=]+)([0-9.]+))?/,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return void 0!==a.find((function(e){var r=dt(e.match(i),4),a=r[1],o=r[2],s=r[3];return a===n.name&&(void 0===s||t.matchVersion(n.version,o,s))}))}},{key:"matchVersion",value:function(e,t,n){for(var i=e.split("."),r=n.split("."),a=Math.min(i.length,r.length),o="=",s=-1;"="===o&&++s<a;)i[s]=parseInt(i[s],10),r[s]=parseInt(r[s],10),o=i[s]!==r[s]?i[s]<r[s]?"<":">":"=";return"="===o&&(o=i.length!==r.length?i.length<r.length?"<":">":"="),-1!==t.indexOf(o)}},{key:"isNode",value:function(){return this.match("node")}},{key:"isBrowser",value:function(){return"undefined"!=typeof window}},{key:"placeBrowserAttribute",value:function(){if(e.isBrowser()&&!1!==e.identify()){var t=e.identify(),n=t.name,i=t.version;document.documentElement.dataset.browser="".concat(n,"/").concat(i)}return this}}]),e}(),xc=Is.left;Be({target:"Array",proto:!0,forced:We("reduce")},{reduce:function(e){return xc(this,e,arguments.length,arguments.length>1?arguments[1]:void 0)}});var Ec=function(e){function t(e){var n;return nt(this,t),(n=ht(this,ot(t).call(this)))._title=e,n._$trigger=null,n._visible=!1,n._value=null,n._finishCallback=null,n._cancelCallback=null,n._keyUpHandler=n.keyDidPress.bind(ct(n)),n._$outer=null,n._$dialog=null,n}return at(t,e),rt(t,[{key:"isVisible",value:function(){return this._visible}},{key:"setVisible",value:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this._visible!==t){this._visible=t;var i=this.getElement();t&&(document.body.appendChild(i),this._$trigger=document.activeElement);var r=this._$dialog.getBoundingClientRect().height;t?this._$dialog.style.height="0px":(this._$dialog.style.height="".concat(r,"px"),this._$outer.style.height="".concat(r,"px")),i.getBoundingClientRect(),i.addEventListener("transitionend",(function(){setTimeout(e.visibilityDidChange.bind(e,t,n),100)}),{once:!0}),t?(document.body.classList.add("modal-visible"),i.classList.add("modal--visible"),this._$dialog.style.height="".concat(r,"px"),this._keyUpHandler&&document.addEventListener("keyup",this._keyUpHandler)):(document.body.classList.remove("modal-visible"),i.classList.remove("modal--visible"),this._$dialog.style.height="0px",this._keyUpHandler&&document.removeEventListener("keyup",this._keyUpHandler))}return this}},{key:"visibilityDidChange",value:function(e,t){var n=this;e?(this._$dialog.removeAttribute("style"),this.getElement().focus()):(setTimeout((function(){n._$dialog.removeAttribute("style"),n._$outer.removeAttribute("style");var e=n.getElement();null!==e.parentNode&&e.parentNode.removeChild(e)}),100),!1===t&&null!==this._finishCallback?this._finishCallback(this._value):!0===t&&null!==this._cancelCallback&&this._cancelCallback(),this._$trigger&&(this._$trigger.focus(),this._$trigger=null),this._finishCallback=null,this._cancelCallback=null)}},{key:"getValue",value:function(){return this._value}},{key:"setValue",value:function(e){return this._value!==e&&(this._value=e,this.valueDidChange(e)),this}},{key:"valueDidChange",value:function(e){}},{key:"prompt",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;return void 0!==t&&this.setValue(t),new Promise((function(t,n){e._finishCallback=t,e._cancelCallback=n,e.open()}))}},{key:"open",value:function(){return this.setVisible(!0)}},{key:"cancel",value:function(){return this.setVisible(!1,!0)}},{key:"finish",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;return void 0!==e&&this.setValue(e),this.setVisible(!1,!1)}},{key:"render",value:function(){var e=this;return this._$dialog=this.renderDialog(),this._$outer=Gt.createElement("div",{className:"modal__outer"},[this._$dialog]),Gt.createElement("div",{className:"modal",role:"dialog",tabIndex:-1},[Gt.createElement("div",{className:"modal__backdrop"}),Gt.createElement("div",{className:"modal__scrollable",role:"document",onClick:function(t){t.target===t.currentTarget&&(t.preventDefault(),e.cancel())}},[this._$outer])])}},{key:"renderDialog",value:function(){return Gt.createElement("div",{className:"modal__dialog"},[this.renderHeader(),this.renderContent()])}},{key:"renderHeader",value:function(){var e=this,t=Gt.createElement("button",{className:"modal__btn-close",onClick:function(t){t.preventDefault(),e.cancel()}});return t.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M15 2.41L13.59 1 8 6.59 2.41 1 1 2.41 6.59 8 1 13.59 2.41 15 8 9.41 13.59 15 15 13.59 9.41 8z"/></svg>',Gt.createElement("header",{className:"modal__header"},[Gt.createElement("span",{className:"modal__title"},this._title),t])}},{key:"renderContent",value:function(){}},{key:"keyDidPress",value:function(e){27===e.keyCode&&(e.preventDefault(),this.cancel())}}]),t}(Gt),Sc=function(e){function t(e){var n;return nt(this,t),(n=ht(this,ot(t).call(this,"Library")))._library=e,n._filteredLibrary=e,n._categories={},n}return at(t,e),rt(t,[{key:"clearFilter",value:function(){return this._filteredLibrary=this._library,this.refresh(),this}},{key:"applyFilter",value:function(e){return this._filteredLibrary=this._library.filter(e),this.refresh(),this}},{key:"render",value:function(){var e=ft(ot(t.prototype),"render",this).call(this);return e.classList.add("modal-library"),e}},{key:"renderContent",value:function(){return Gt.createElement("div",{className:"modal__content"},[this.renderBricks()])}},{key:"renderBricks",value:function(){var e=this,t=[],n=[];return this._filteredLibrary.forEach((function(e){var i=t.indexOf(e.category);-1===i?(t.push(e.category),n.push([e])):n[i].push(e)})),Gt.createElement("ul",{className:"modal-library__categories"},t.map((function(t,i){return Gt.createElement("li",{className:"modal-library__category"},[Gt.createElement("span",{className:"modal-library__category-title"},t),Gt.createElement("ul",{className:"modal-library__bricks"},n[i].map(e.renderBrick.bind(e)))])})))}},{key:"renderBrick",value:function(e){var t=this;return Gt.createElement("li",{},[Gt.createElement("button",{className:"modal-library__brick modal-library__brick--"+e.type,onClick:function(n){n.preventDefault(),t.finish(e.name)}},[Gt.createElement("span",{className:"modal-library__brick-title"},e.title)])])}}]),t}(Ec),Cc="pipe__scroll-handle--disabled",Vc="application/vnd.cryptii.brick+json",Lc=function(e){function t(){var e;return nt(this,t),(e=ht(this,ot(t).call(this)))._$scrollable=null,e._$content=null,e._draggingBrickView=null,e._draggingTargetIndex=null,e._$pipeParts=[],e._pipePartPositions=[],e._pipePartIndex=[],e._scrollMax=0,e._scrollPosition=0,e._scrollHandleIndex=null,e._scrollHandleStartPosition=null,e._scrollHandleStartTime=null,e}return at(t,e),rt(t,[{key:"render",value:function(){this._$content=Gt.createElement("div",{className:"pipe__content"}),this._$scrollHandleLeft=Gt.createElement("div",{className:"pipe__scroll-handle pipe__scroll-handle--left pipe__scroll-handle--disabled",onMouseEnter:this.scrollHandleDidStart.bind(this,0),onDragEnter:this.scrollHandleDidStart.bind(this,0),onMouseLeave:this.scrollHandleDidStop.bind(this),onDragLeave:this.scrollHandleDidStop.bind(this)}),this._$scrollHandleRight=Gt.createElement("div",{className:"pipe__scroll-handle pipe__scroll-handle--right",onMouseEnter:this.scrollHandleDidStart.bind(this,1),onDragEnter:this.scrollHandleDidStart.bind(this,1),onMouseLeave:this.scrollHandleDidStop.bind(this),onDragLeave:this.scrollHandleDidStop.bind(this)});var e=document.querySelector(".pipe");return null===e&&(e=Gt.createElement("div")).classList.add("pipe"),e.ondrop=this.dragDidDrop.bind(this),e.ondragenter=this.dragDidEnterPipe.bind(this),e.ondragover=this.dragDidOverPipe.bind(this),this._$scrollable=e.querySelector(".pipe__scrollable"),null===this._$scrollable&&(this._$scrollable=Gt.createElement("div",{className:"pipe__scrollable"})),this._$scrollable.appendChild(this._$content),this._$scrollable.appendChild(this._$scrollHandleLeft),this._$scrollable.appendChild(this._$scrollHandleRight),e.appendChild(this._$scrollable),e.addEventListener("wheel",this.mouseDidWheel.bind(this)),e}},{key:"appendSubviewElement",value:function(e){return e instanceof Vu?(this.update(),this):ft(ot(t.prototype),"appendSubviewElement",this).call(this,e)}},{key:"removeSubviewElement",value:function(e){return ft(ot(t.prototype),"removeSubviewElement",this).call(this,e),e instanceof Vu&&this.update(),this}},{key:"update",value:function(){var e=this.getModel().getBricks(),t=e.map((function(e){return e.getView()}));this.getElement();var n,i=this._$content;t.forEach((function(e){var t=e.getElement();t.parentNode&&t.parentNode.removeChild(t)})),i.innerHTML="",this._$pipeParts=[],this._pipePartIndex=[];for(var r=[],a=0;a<e.length;a++)if(e[a].isHidden()){if(r.push(e[a]),a+1===e.length||!e[a+1].isHidden()){var o=a-r.length+1;n=this._createPipePart(o),this._$pipeParts.push(n),this._pipePartIndex.push(o),i.appendChild(n),i.appendChild(this._createCollapsedPart(r)),r=[]}}else n=this._createPipePart(a),this._$pipeParts.push(n),this._pipePartIndex.push(a),i.appendChild(n),i.appendChild(this._createBrickPart(t[a]));return n=this._createPipePart(t.length),this._$pipeParts.push(n),this._pipePartIndex.push(t.length),i.appendChild(n),this.layout(),this}},{key:"_createPipePart",value:function(e){var t=this;return Gt.createElement("button",{className:"pipe__part-pipe",onClick:function(n){t.getModel().viewAddButtonDidClick(t,e),n.preventDefault()}},[Gt.createElement("div",{className:"pipe__btn-add"},"Add encoder or viewer"),Gt.createElement("div",{className:"pipe__drop-handle"})])}},{key:"_createBrickPart",value:function(e){var t=e.getModel()instanceof hc?"encoder":"viewer";return Gt.createElement("div",{className:"pipe__part-brick pipe__part-brick--".concat(t),draggable:!0,onMouseDown:this.brickDragWillStart.bind(this,e),onDragStart:this.brickDragDidStart.bind(this,e),onDragEnd:this.brickDragDidEnd.bind(this,e)},e.getElement())}},{key:"_createCollapsedPart",value:function(e){var t=this;return Gt.createElement("button",{className:"pipe__part-collapsed",onClick:function(n){t.getModel().viewHiddenBrickGroupDidClick(t,e),n.preventDefault()}},e.map((function(){return Gt.createElement("div",{className:"pipe__part-collapsed-fold"})})))}},{key:"isBrickDragEvent",value:function(e){var t=e.dataTransfer.types;return void 0!==t.contains?t.contains(Vc):-1!==t.indexOf(Vc)}},{key:"isFieldMouseEvent",value:function(e){var t=e.target.nodeName.toLowerCase();return-1!==["textarea","input"].indexOf(t)}},{key:"brickDragWillStart",value:function(e,t){if(this.isFieldMouseEvent(t)||!e.getModel().isValid()){var n=e.getElement().parentNode;n&&(n.draggable=!1,setTimeout((function(){n.draggable=!0}),500))}}},{key:"brickDragDidStart",value:function(e,t){if(!this.isFieldMouseEvent(t)&&e.getModel().isValid()){this._draggingBrickView=e;var n=JSON.stringify(e.getModel().serialize());t.dataTransfer.setData(Vc,n),t.dataTransfer.setData("application/json",n),t.dataTransfer.effectAllowed="copyMove"}}},{key:"brickDragDidEnd",value:function(e,t){this._draggingBrickView=null,this.setDraggingPipePartIndex(null)}},{key:"dragDidEnterPipe",value:function(e){this.isBrickDragEvent(e)&&e.preventDefault()}},{key:"dragDidOverPipe",value:function(e){if(this.isBrickDragEvent(e)){e.preventDefault();var t=e.pageX+this._scrollPosition,n=e.pageY,i=null,r=0;this._pipePartPositions.forEach((function(e,a){var o=Math.sqrt(Math.pow(t-e.x,2)+Math.pow(n-e.y,2));(null===i||o<i)&&(i=o,r=a)})),this.setDraggingPipePartIndex(r)}}},{key:"dragDidDrop",value:function(e){if(this.isBrickDragEvent(e)){e.preventDefault();var t="copy"===e.dataTransfer.effectAllowed,n=this._pipePartIndex[this._draggingTargetIndex];if(this.setDraggingPipePartIndex(null),null!==this._draggingBrickView){var i=this._draggingBrickView.getModel();this.getModel().viewBrickDidDrop(this,n,i,t)}else{var r=JSON.parse(e.dataTransfer.getData(Vc));this.getModel().viewBrickDidDrop(this,n,r,t)}}}},{key:"setDraggingPipePartIndex",value:function(e){this._draggingTargetIndex!==e&&(null!==this._draggingTargetIndex&&this._$pipeParts[this._draggingTargetIndex].classList.remove("pipe__part-pipe--dragging"),this._draggingTargetIndex=e,null!==e?(this._$pipeParts[this._draggingTargetIndex].classList.add("pipe__part-pipe--dragging"),this.getElement().classList.add("pipe--dragging")):this.getElement().classList.remove("pipe--dragging"))}},{key:"mouseDidWheel",value:function(e){var t=e.deltaX,n=e.deltaY;Math.abs(t)<=Math.abs(n)||(e.preventDefault(),this.scrollTo(this._scrollPosition+t))}},{key:"scrollHandleDidStart",value:function(e){this._scrollHandleIndex=e,this._scrollHandleStartPosition=this._scrollPosition,this._scrollHandleStartTime=(new Date).getTime(),window.requestAnimationFrame(this.scrollHandleDidScroll.bind(this))}},{key:"scrollHandleDidScroll",value:function(){if(null!==this._scrollHandleIndex){var e=0===this._scrollHandleIndex?-1:1,t=((new Date).getTime()-this._scrollHandleStartTime)/1e3,n=e*Math.pow(t,2)*1e3;this.scrollTo(this._scrollHandleStartPosition+n),window.requestAnimationFrame(this.scrollHandleDidScroll.bind(this))}}},{key:"scrollHandleDidStop",value:function(){this._scrollHandleIndex=null,this._scrollHandleStartPosition=null,this._scrollHandleStartTime=null}},{key:"layout",value:function(){var e=this;ft(ot(t.prototype),"layout",this).call(this),this._scrollMax=this._$content.offsetWidth-this._$scrollable.offsetWidth,this.scrollTo(this._scrollPosition),0===this._scrollPosition?this._$scrollHandleLeft.classList.add(Cc):this._$scrollHandleLeft.classList.remove(Cc),this._scrollPosition===this._scrollMax?this._$scrollHandleRight.classList.add(Cc):this._$scrollHandleRight.classList.remove(Cc);var n=window.scrollY;this._pipePartPositions=this._$pipeParts.map((function(t){var i=t.getBoundingClientRect();return{x:i.left+.5*i.width+e._scrollPosition,y:i.top+.5*i.height+n}}))}},{key:"scrollTo",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return e=parseInt(e),e=Math.max(Math.min(e,this._scrollMax),0),this._scrollPosition!==e&&(0===e?(this._$scrollHandleLeft.classList.add(Cc),this.scrollHandleDidStop()):0===this._scrollPosition&&this._$scrollHandleLeft.classList.remove(Cc),e===this._scrollMax?(this._$scrollHandleRight.classList.add(Cc),this.scrollHandleDidStop()):this._scrollPosition===this._scrollMax&&this._$scrollHandleRight.classList.remove(Cc),this._$content.style.transform=e>0?"translate(".concat(-e,"px, 0)"):"",this._scrollPosition=e),this}}]),t}(Gt),Tc=function(e){function t(){var e;return nt(this,t),(e=ht(this,ot(t).call(this)))._viewPrototype=Lc,e._brickFactory=null,e._service=null,e._id=null,e._url=null,e._title=null,e._description=null,e._bricks=[],e._brickState=[],e._bucketContent=[yu.empty()],e._bucketListeners=[[]],e._selectedBucket=0,e._libraryModalView=null,e}return at(t,e),rt(t,[{key:"getId",value:function(){return this._id}},{key:"setId",value:function(e){return this._id=e,this}},{key:"getUrl",value:function(){return this._url}},{key:"setUrl",value:function(e){return this._url=e,this}},{key:"getTitle",value:function(){return this._title}},{key:"setTitle",value:function(e){return this._title=e,this}},{key:"getDescription",value:function(){return this._description}},{key:"setDescription",value:function(e){return this._description=e,this}},{key:"getBrickFactory",value:function(){return this._brickFactory}},{key:"setBrickFactory",value:function(e){return this._brickFactory=e,this}},{key:"getService",value:function(){return this._service}},{key:"setService",value:function(e){return this._service=e,this}},{key:"getLibraryModalView",value:function(){if(null===this._libraryModalView){var e=this.getBrickFactory().getLibrary();this._libraryModalView=new Sc(e)}return this._libraryModalView}},{key:"getLength",value:function(){return this._bricks.length}},{key:"getBricks",value:function(){return this._bricks.slice()}},{key:"getBrick",value:function(e){if(e<0||e>this._bricks.length)throw new Error("Brick index is out of bounds.");return this._bricks[e]}},{key:"containsBrick",value:function(e){return-1!==this._bricks.indexOf(e)}},{key:"addBrick",value:function(e){return this.spliceBricks(-1,0,[e]),this}},{key:"addBricks",value:function(e){return this.spliceBricks(-1,0,e),this}},{key:"duplicateBrick",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!this.containsBrick(e))throw new Error("Brick is not part of the pipe.");return null===t&&(t=this._bricks.indexOf(e)),this.spliceBricks(t,0,[e.copy()]),this}},{key:"moveBrick",value:function(e,t){var n=this._bricks.indexOf(e);if(-1===n)throw new Error("Brick is not part of the pipe.");return t>n&&t--,this.spliceBricks(n,1),this.spliceBricks(t,0,[e]),this}},{key:"removeBrick",value:function(e){var t=e;if(e instanceof ac&&-1===(t=this._bricks.indexOf(e)))throw new Error("Brick is not part of the pipe and thus can't be removed.");return this.spliceBricks(t,1),this}},{key:"removeBricks",value:function(e){var t=this;return e.map((function(e){var n=e;if(e instanceof ac&&-1===(n=t._bricks.indexOf(e)))throw new Error("Brick is not part of the pipe and thus can't be removed.");return n})).sort((function(e,t){return t-e})).forEach((function(e){return t.spliceBricks(e,1)})),this}},{key:"replaceBrick",value:function(e,t){var n=this._bricks.indexOf(e);if(-1===n)throw new Error("Can't replace a brick not being part of the pipe.");return this.spliceBricks(n,1,[t]),this}},{key:"spliceBricks",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];e=e>=0?e:Math.max(this._bricks.length+e+1,0),this._bucketListeners.map((function(e){return e.forEach((function(e){return e.reject("Pipe bricks have been changed.")})),[]})),i=i.map((function(e){return e instanceof ac?e:ac.extract(e,n.getBrickFactory())}));var r=this._bricks.splice.apply(this._bricks,[e,t].concat(i));this._brickState.splice.apply(this._brickState,[e,t].concat(i.map((function(){return{settingsVersion:1,busy:!1}}))));var a=0,o=0;if(i.forEach((function(e){e.setPipe(n),n.hasView()&&n.getView().addSubview(e.getView()),e instanceof hc&&a++,Fu.trigger("pipeAddBrick",{pipe:n,brick:e})})),r.forEach((function(e){n.hasView()&&n.getView().removeSubview(e.getView()),e.setPipe(null),e instanceof hc&&o++,Fu.trigger("pipeRemoveBrick",{pipe:n,brick:e})})),a>0||o>0){var s=this._bricks.reduce((function(t,n,i){return t+(n instanceof hc&&i<=e?1:0)}),0);0===s&&(s=1);var l=new Array(a).fill().map((function(){return yu.empty()})),u=this._bucketContent.splice.apply(this._bucketContent,[s,o].concat(l));if(this._bucketListeners.splice.apply(this._bucketListeners,[s,o].concat(l.map((function(e){return[]})))),this._selectedBucket<=s-1)this._propagateContent(s-1,!0);else if(this._selectedBucket===s&&1===o&&1===a)this._bucketContent[this._selectedBucket]=u[0],this._propagateContent(this._selectedBucket,!1);else if(this._selectedBucket<=s-1+o)this._selectedBucket=s-1,this._propagateContent(this._selectedBucket,!0);else{var c=a-o;this._selectedBucket+=c,this._propagateContent(s+a,!1)}}else i.forEach((function(e){return n._triggerViewerView(e)}));return this.hasView()&&this.getView().layout(),r}},{key:"getBucketLength",value:function(){return this._bucketContent.length}},{key:"getContent",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(t>=this._bucketContent.length)throw new Error("Bucket index ".concat(t," is out of bounds."));return n&&this.isBusy()?new Promise((function(n,i){e._bucketListeners[t].push({resolve:n,reject:i})})):this._bucketContent[t]}},{key:"setContent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return e=yu.wrap(e),this.getContent(t,!1).isEqualTo(e)?this:(this._bucketContent[t]=e,(null===n||n instanceof oc)&&(this._selectedBucket=t),this._propagateContent(t,n),this)}},{key:"_propagateContent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this.getBricksAttachedToBucket(e),i=n.lowerEncoder,r=n.upperEncoder,a=n.viewers;return a.filter((function(e){return e!==t})).forEach(this._triggerViewerView.bind(this)),null!==i&&!0!==t&&i!==t&&this._triggerEncoderTranslation(i,!1),null!==r&&!1!==t&&r!==t&&this._triggerEncoderTranslation(r,!0),this}},{key:"_triggerViewerView",value:function(e){var t,n,i,r,a,o;return regeneratorRuntime.async((function(s){for(;;)switch(s.prev=s.next){case 0:if(!this._getBrickState(e,"busy")){s.next=2;break}return s.abrupt("return",this);case 2:return this._setBrickState(e,"busy",!0),t=this.getBucketIndexForBrick(e),n=this.getContent(t,!1),i=this._getBrickState(e,"settingsVersion"),s.prev=6,s.next=9,regeneratorRuntime.awrap(e.view(n));case 9:s.next=14;break;case 11:s.prev=11,s.t0=s.catch(6),r=s.t0;case 14:if(this.containsBrick(e)){s.next=16;break}return s.abrupt("return");case 16:if(this._setBrickState(e,"busy",!1),a=this._getBrickState(e,"settingsVersion"),o=this.getBucketIndexForBrick(e),this.getContent(o,!1).isEqualTo(n)&&i===a||this._triggerViewerView(e),this.brickDidFinish(e,r),!r||r instanceof cu){s.next=23;break}throw r;case 23:case"end":return s.stop()}}),null,this,[[6,11]])}},{key:"_triggerEncoderTranslation",value:function(e,t){var n,i,r,a,o,s,l,u,c,h;return regeneratorRuntime.async((function(f){for(;;)switch(f.prev=f.next){case 0:if(!this._getBrickState(e,"busy")){f.next=2;break}return f.abrupt("return",this);case 2:return this._setBrickState(e,"busy",!0),n=this.getBucketIndexForBrick(e),i=this.getContent(n+(t?0:1),!1),r=this._getBrickState(e,"settingsVersion"),f.prev=6,f.next=9,regeneratorRuntime.awrap(e.translate(i,t));case 9:a=f.sent,f.next=15;break;case 12:f.prev=12,f.t0=f.catch(6),o=f.t0;case 15:if(this.containsBrick(e)){f.next=17;break}return f.abrupt("return");case 17:if(this._setBrickState(e,"busy",!1),s=this._getBrickState(e,"settingsVersion"),l=this.getBucketIndexForBrick(e),u=l+(t?0:1),c=this.getContent(u,!1),h=l+(t?1:0),!(t&&this._selectedBucket>=h||!t&&this._selectedBucket<=h)){f.next=26;break}return this._triggerEncoderTranslation(e,!t),f.abrupt("return");case 26:if(o||this.setContent(a,h,e),c.isEqualTo(i)&&r===s||this._triggerEncoderTranslation(e,t),this.brickDidFinish(e,o),!o||o instanceof cu){f.next=31;break}throw o;case 31:case"end":return f.stop()}}),null,this,[[6,12]])}},{key:"_getBrickState",value:function(e,t){var n=this._bricks.indexOf(e);if(-1===n)throw new Error("Brick is not part of the pipe and thus has no state.");return this._brickState[n][t]}},{key:"_setBrickState",value:function(e,t,n){var i=this._bricks.indexOf(e);if(-1===i)throw new Error("Brick is not part of the pipe and thus has no state.");return this._brickState[i][t]=n,this}},{key:"isBusy",value:function(){var e=this;return this._bricks.reduce((function(t,n){return t||e._getBrickState(n,"busy")}),!1)}},{key:"getBucketIndexForBrick",value:function(e){for(var t=!1,n=0,i=-1;!t&&++i<this._bricks.length;)this._bricks[i]===e?t=!0:this._bricks[i]instanceof hc&&n++;if(!t)throw new Error("Can't find bucket for brick. Brick is not part of Pipe.");return n}},{key:"getBricksAttachedToBucket",value:function(e){for(var t,n=null,i=null,r=[],a=0,o=-1;++o<this._bricks.length&&a<=e;)(t=this._bricks[o])instanceof hc?(a===e-1?n=t:a===e&&(i=t),a++):a===e&&r.push(t);return{lowerEncoder:n,upperEncoder:i,viewers:r}}},{key:"viewerContentDidChange",value:function(e,t){if(this.containsBrick(e)){var n=this.getBucketIndexForBrick(e);this.setContent(t,n,e)}}},{key:"brickVisibilityDidChange",value:function(e,t){this.updateView()}},{key:"brickSettingDidChange",value:function(e){if(this.containsBrick(e))if(this._setBrickState(e,"settingsVersion",this._getBrickState(e,"settingsVersion")+1),e instanceof hc){var t=this.getBucketIndexForBrick(e),n=this._selectedBucket<=t;this._triggerEncoderTranslation(e,n)}else this._triggerViewerView(e)}},{key:"encoderDidReverse",value:function(e,t){if(3===this._bricks.length&&"viewer"===this._bricks[0].getMeta().type&&"encoder"===this._bricks[1].getMeta().type&&"viewer"===this._bricks[2].getMeta().type){var n=this.getContent(1,!1),i=this.spliceBricks(0,3);i.reverse(),this.setContent(n,0),this.spliceBricks(0,0,i)}else this.brickSettingDidChange(e)}},{key:"brickDidFinish",value:function(e,t){var n=this;this.isBusy()||this._bucketListeners.map((function(e,i){return e.forEach((function(e){return null!==t?e.resolve(n.getContent(i,!1)):e.reject(t)})),[]}))}},{key:"brickReplaceButtonDidClick",value:function(e){var t,n,i;return regeneratorRuntime.async((function(r){for(;;)switch(r.prev=r.next){case 0:if((t=this.getLibraryModalView()).applyFilter((function(t){return t.type===e.getMeta().type})),!t.isVisible()){r.next=4;break}return r.abrupt("return");case 4:return n=e.getMeta().name,r.prev=5,r.next=8,regeneratorRuntime.awrap(t.prompt(n));case 8:n=r.sent,r.next=14;break;case 11:return r.prev=11,r.t0=r.catch(5),r.abrupt("return");case 14:n!==e.getMeta().name&&(i=this.getBrickFactory().create(n),e instanceof hc&&i instanceof hc&&i.setReverse(e.isReverse()),this.replaceBrick(e,i));case 15:case"end":return r.stop()}}),null,this,[[5,11]])}},{key:"viewAddButtonDidClick",value:function(e,t){var n,i,r;return regeneratorRuntime.async((function(e){for(;;)switch(e.prev=e.next){case 0:return Fu.trigger("pipeAddButtonClick",{pipe:this,index:t}),(n=this.getLibraryModalView()).clearFilter(),e.prev=3,e.next=6,regeneratorRuntime.awrap(n.prompt());case 6:i=e.sent,e.next=12;break;case 9:return e.prev=9,e.t0=e.catch(3),e.abrupt("return");case 12:r=this.getBrickFactory().create(i),this.spliceBricks(t,0,[r]);case 14:case"end":return e.stop()}}),null,this,[[3,9]])}},{key:"viewBrickDidDrop",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];n instanceof ac?i?this.duplicateBrick(n,t):this.moveBrick(n,t):this.spliceBricks(t,0,[n]),Fu.trigger("pipeBrickDrop",{pipe:this,index:t,brick:n,copy:i})}},{key:"viewHiddenBrickGroupDidClick",value:function(e,t){t.forEach((function(e){return e.setHidden(!1)})),Fu.trigger("pipeHiddenBrickGroupClick",{pipe:this,bricks:t})}},{key:"didCreateView",value:function(e){this._bricks.forEach((function(t){return e.addSubview(t.getView())}))}},{key:"store",value:function(){var e;return regeneratorRuntime.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(this.getService().storePipe(this));case 2:return e=t.sent,t.abrupt("return",e.url);case 4:case"end":return t.stop()}}),null,this)}},{key:"serialize",value:function(){var e={};null!==this._id&&(e.id=this._id),null!==this._url&&(e.url=this._url),null!==this._title&&(e.title=this._title),null!==this._description&&(e.description=this._description),e.items=this._bricks.map((function(e){return e.serialize()}));var t=this._selectedBucket,n=this._bucketContent[t];if(!n.isEmpty()||t>0){e.content={},n.needsTextEncoding()?(e.content.data=du.base64StringFromBytes(n.getBytes()),e.content.encoding="base64"):e.content.data=n.getString();var i=this.getBricksAttachedToBucket(t).lowerEncoder;null!==i&&(e.content.index=this._bricks.indexOf(i)+1)}return e}}],[{key:"extract",value:function(e,n){if(!Array.isArray(e.items)||0===e.items.length)throw new Error("Pipe property 'items' is expected to be of type 'array' and must not be empty");var i=new t;if(i.setBrickFactory(n),i.addBricks(e.items),void 0!==e.id&&null!==e.id){if("number"!=typeof e.id)throw new Error("Optional pipe property 'id' is expected to be of type 'number'");i.setId(e.id)}if(void 0!==e.url&&null!==e.url){if("string"!=typeof e.url)throw new Error("Optional pipe property 'url' is expected to be of type 'string'");i.setUrl(e.url)}if(void 0!==e.title&&null!==e.title){if("string"!=typeof e.title)throw new Error("Optional pipe property 'title' is expected to be of type 'string'");i.setTitle(e.title)}if(void 0!==e.description&&null!==e.description){if("string"!=typeof e.description)throw new Error("Optional pipe property 'description' is expected to be of type 'string'");i.setDescription(e.description)}var r="",a=0;if(void 0!==e.content&&null!==e.content){if("object"!==tt(e.content))throw new Error("Optional pipe property 'content' is expected to be of type 'object'");if(void 0===e.content.data||"string"!=typeof e.content.data)throw new Error("Pipe property 'content.data' is expected to be of type 'string'");if(void 0!==e.content.encoding&&"string"!=typeof e.content.encoding)throw new Error("Optional pipe property 'content.encoding' is expected to be of type 'string'");if(void 0!==e.content.index&&"number"!=typeof e.content.index)throw new Error("Optional pipe property 'content.index' is expected to be of type 'number'");var o=e.content.encoding||"text";switch(o){case"text":r=e.content.data;break;case"base64":r=du.bytesFromBase64String(e.content.data);break;default:throw new Error("Optional pipe property 'content.encoding' is set to an unsupported "+"encoding '".concat(o,"'; Supported values: text, base64"))}var s=e.content.index||0;if(s===i.getLength())a=i.getBucketLength()-1;else{if(!(s>=0&&s<i.getLength()))throw new Error("Optional pipe property 'content.index' is expected to be a number "+"ranging from 0 to ".concat(i.getBucketLength()-1));a=i.getBucketIndexForBrick(i.getBrick(s))}}return i.setContent(r,a),i}}]),t}(Ou),Pc="v1",Bc=function(){function e(t){nt(this,e),this._rootEndpoint="".concat(t,"/").concat(Pc)}return rt(e,[{key:"createSession",value:function(){var e;return regeneratorRuntime.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(window.fetch("".concat(this._rootEndpoint,"/session")));case 2:if((e=t.sent).ok){t.next=5;break}throw new Error("Unable to create a session");case 5:return t.abrupt("return",e.json());case 6:case"end":return t.stop()}}),null,this)}},{key:"storePipe",value:function(e){var t,n,i;return regeneratorRuntime.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,regeneratorRuntime.awrap(this.createSession());case 2:return t=r.sent,r.next=5,regeneratorRuntime.awrap(window.fetch("".concat(this._rootEndpoint,"/pipes"),{method:"POST",headers:{"Content-type":"application/json; charset=utf-8",Authorization:"Bearer ".concat(t.token)},body:JSON.stringify(e.serialize())}));case 5:if((n=r.sent).ok){r.next=8;break}throw new Error("Unable to store this pipe");case 8:return r.next=10,regeneratorRuntime.awrap(n.json());case 10:if(void 0===(i=r.sent).error){r.next=13;break}throw new Error("Unable to store this pipe: "+i.error.message);case 13:return r.abrupt("return",i);case 14:case"end":return r.stop()}}),null,this)}}]),e}(),Ac={version:"4.0.8+master.47ba248",scope:"/",serviceEndpoint:"https://cryptii.com/api",serviceWorkerUrl:null},Mc=null,Fc=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return nt(this,t),(e=ht(this,ot(t).call(this)))._viewPrototype=Yt,e._pipe=null,e._config=Object.assign(Ac,n),e._service=new Bc(e._config.serviceEndpoint),Mc=ct(e),e}return at(t,e),rt(t,[{key:"run",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;wc.placeBrowserAttribute(),null!==t?this._pipe=Tc.extract(t,_c.getInstance()):(this._pipe=new Tc,this._pipe.setBrickFactory(_c.getInstance())),this._pipe.setService(this._service);var n=this.getView();return n.layout(),setTimeout(n.layout.bind(n),100),"undefined"!=typeof navigator&&"serviceWorker"in navigator&&(this._config.serviceWorkerUrl?navigator.serviceWorker.register(this._config.serviceWorkerUrl,{scope:this._config.scope}):navigator.serviceWorker.getRegistrations().then((function(e){return e.forEach((function(e){return e.unregister()}))}))),wc.isBrowser()&&document.addEventListener("keydown",(function(t){t.ctrlKey&&"i"===t.key&&(t.preventDefault(),alert(e.debug()))})),this}},{key:"debug",value:function(){return JSON.stringify({version:this._config.version,env:wc.identify(),pipe:this.getPipe().serialize()})}},{key:"getPipe",value:function(){return this._pipe}},{key:"didCreateView",value:function(e){e.addSubview(this._pipe.getView())}}],[{key:"getInstance",value:function(){return Mc}}]),t}(Ou);if(wc.isBrowser()&&null!==document.querySelector("script[data-cryptii-init]")){var Oc=function(){var e=document.querySelector("script[data-cryptii-pipe]"),t=null!==e?JSON.parse(e.innerHTML):null,n=document.querySelector("script[data-cryptii-config]"),i=null!==n?JSON.parse(n.innerHTML):{};new Fc(i).run(t)};"loading"!==document.readyState?Oc():window.addEventListener("DOMContentLoaded",Oc)}e.App=Fc,e.ArrayUtil=Cl,e.Brick=ac,e.BrickFactory=_c,e.ByteEncoder=du,e.ByteEncodingError=hu,e.Chain=yu,e.Encoder=hc,e.EnvUtil=wc,e.EventManager=Fu,e.Factory=en,e.Field=Du,e.FieldFactory=ic,e.Form=rc,e.GenericError=uu,e.InvalidInputError=cu,e.LibraryModalView=Sc,e.MathUtil=cc,e.ModalView=Ec,e.Pipe=Tc,e.Random=Sl,e.StringUtil=lu,e.TextEncoder=pu,e.TextEncodingError=vu,e.View=Gt,e.Viewable=Ou,e.Viewer=oc,Object.defineProperty(e,"__esModule",{value:!0})}));
